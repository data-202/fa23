{
  "hash": "b9c57da10f543ae59b4bfb2a23e8ff62",
  "result": {
    "markdown": "---\ntitle: \"DATA 202 - Week 8\"\nsubtitle: \"Notes on causal theories\"\nauthor: \"Nathan Alexander, PhD\"\ninstitute: \"Center for Applied Data Science and Analytics\"\nformat: \n  html: default\n  revealjs:\n    output-file: week8-slides.html\n    height: 900\n    width: 1600\n    smaller: false\n    scrollable: true\n    slide-number: c/t #< collapsed/total\n    logo: \"img/howard-logo.jpg\"\n    footer: \"[Course Data GitHub](https://github.com/data-202)\"\n    toc: false\n    theme: simple\n    echo: true\n    incremental: false\n---\n\n\n### Review of [Week 7 code](/week7.html#part-iii-code)\n\n## Part I: Context\n\n---\n\n> The great masses of people are determined to end the exploitation of their races and land. They are awake and moving toward their goal like a tidal wave. You can hear them rumbling in every village street, on the docks, in the houses, among the students, in the churches, and at political meetings. - Martin Luther King, Jr., [Nobel Lecture, December 1964](https://www.nobelprize.org/prizes/peace/1964/king/lecture/)\n\n![Illustration by Yuko Shimizu from [cigionline.org](https://www.cigionline.org/articles/as-geopolitical-blocs-vie-for-primacy-in-space-the-history-of-colonization-looms-large/){target=\"_blank\"}.](img/wk8-a-3.jpg)\n\n### History, cause, and effect\n\nTheory is often understood through an investigation of both the literature and the historical contexts surrounding a given issue. Take, for example, the legacies of colonization. As data and scientific developments expand into new fields, new questions arise as to what we can associate and how we understand these associations. For example, how does one theoretically relate a series of events from 150 years ago to a present set of conditions? What are the possibilities? What are the limitations? What are the cautionary tales?\n\nStatistics was situated as a vehicle to understand and measure observations. As it becomes an ever popular vehicle to inform social justice discourses, the many real-world associations identified in society bring to mind the well-known and readily available cautionary tale:\n\n> Correlation does not imply causation.\n\nThis popular statement relates to the ability (or inability) to deduce cause-and-effect relationships.\n\n---\n\n### Correlation\n\nIn the traditional setting, correlation is framed as a statistical measure that relays the size and direction of the relationship between two or more variables. From a more critical framework, however, the idea of associations between variables and the attribution of relationships between variables must be both examined and interrogated. \n\nAssociations should be understood and initiated from the root of a theoretical framework.  \n\nIf two variables are related, in a statistical context, we assume that their values *change* in some ordered fashion. These measures are often represented on an axis depicting the strength of the association.\n\n![Image from statlect.com](img/wk8-a-2.png)\n\nAs one value of a first variable increases the other variable's values may also increase (positive relationship). Alternatively, as the value of one variable increases the other variable's values may decrease (negative relationship). Key questions to consider focus on how context and other factors shape any seeming bivariate relationship.\n\n---\n\n#### Spurious correlation\n\nAt the intersection of mathematics and statistics is the concept of the [*spurious correlation*](https://www.jstor.org/stable/42001453){target=\"_blank\"} (Ward, 2013). A few examples:\n    \n  - [Divorce rate has been found to correlate with margarine use](https://blogs.ams.org/blogonmathblogs/2017/04/10/divorce-and-margarine/){target=\"_blank\"}.\n  \n  - Ice cream sales have been correlated with:\n    \n    - Swimming deaths\n    \n    - Shark attacks\n    \n    - Crime rates\n    \n  - The use of the popular site [Facebook has been correlated with diminished well-being](https://academic.oup.com/jcmc/article/21/4/265/4161784){target=\"_blank\"}.\n    \nThese association help us see the need to investigate relationships further. What are possible unexplained relationships in these associations? We identify potential spurious variables when developing theoretical ideas about associations.\n\n---\n\n### Causation\n\nCausality ([See Sloman and Acnado (2015)](https://www.annualreviews.org/doi/full/10.1146/annurev-psych-010814-015135)) is a representation and  principle of cause and effect. There are many different viewpoints of causation across disciplines and fields of study. Terminology matters in how one frames cause and effect. \n\nThere are four possible relationships between two variables:\n\n  - X causes Y\n  \n  - Y causes X\n  \n  - X and Y are both caused by Z\n  \n  - X is not related to Y\n  \nWhile these relationships may exist in some combination, it is important to frame their differences.\n  \n---\n\n### Associating X and Y\n\nOur initial framing might directly link the variables `X` and `Y`.\n\nFirst, we have the association X causes Y.\n\n\n```{mermaid}\n%%| echo: false\ngraph LR\n  A[X] --> B[Y]\n```\n\n\nNext, we have the association Y causes X.\n\n\n```{mermaid}\n%%| echo: false\ngraph LR\n  A[Y] --> B[X]\n```\n\n\nFinally, we have the association X causes Y and Y causes X.\n\n\n```{mermaid}\n%%| echo: false\ngraph LR\n  A[X] <--> B[Y]\n  B --> A\n```\n\n\n\n---\n\n### Framing spurious relationships\n\nHowever, after further reading, we may find that we need to integrate a third factor Z.\n\nIn this context, a third factor (the \"third-cause fallacy\") represents a spurious relationship. \n\n\n```{mermaid}\n%%| echo: false\ngraph LR\n  A[X]\n  B[Y]\n  C[Z]\n```\n\n\nSpurious relationships denote an observed or hypothesized association. \n\nThere are important differences in how we depict and deal with third factor associations.\n\n---\n\n### Confounding variables\n\nConfounding is a causal concept that focuses on spurious or distorted associations. \n\nBelow, Z is considered a [confounding variable](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4017459/){target=\"_blank\"}. \n\n\n```{mermaid}\n%%| echo: false\ngraph TD\n  A[Z] --> B[X]\n  A --> C[Y]\n```\n\n\n  - Z is related to both the independent, $X$, and dependent, $Y$, variables in the causal sense.\n  \n  - Your analysis should examine if the relationship between $X$ and $Y$ holds.\n  \n  - These interactions are described as *spurious associations*.\n\n---\n\n### Mediating variables\n\nA [mediating variable](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4165346/){target=\"_blank\"} explains the process by which two variables are related.\n\n\n```{mermaid}\n%%| echo: false\ngraph LR\n  A[X] --> B[Z]\n  B --> C[Y]\n```\n\n\n  - Z provides the *mechanism* to relate the independent, $X$, and dependent, $Y$, variables.\n\n---\n\n### Moderating variables\n\nA [moderating variable](https://www.researchgate.net/profile/Hugh-Arnold/publication/240438039_Moderator_Variables_A_Clarification_of_Conceptual_Analytic_and_Psychometric_Issues/links/5ee391fb92851ce9e7dce2ae/Moderator-Variables-A-Clarification-of-Conceptual-Analytic-and-Psychometric-Issues.pdf){target=\"_blank\"} explains the strength by which two variables are related.\n\n\n```{mermaid}\n%%| echo: false\ngraph LR\n  A[X] --> B[Z]\n  A --> C[Y]\n  B --> C\n```\n\n\n  - Z explains the *strength of association* between the independent, $X$, and dependent, $Y$, variables.\n\n---\n\n### Real-world associations\n\n![Image from ACLU.org](img/wk8-a-1.jpg)\n\nLet us look at a more concrete example. Imagine you read or hear the statement:\n\n> \"In the U.S., Black drivers are more likely to be pulled over by police than white drivers.\"\n\nThis statement represents a complex relationship that requires history and context to inform analysis.\n\n  - [Racial profiling](https://www.aclu.org/issues/racial-justice/race-and-criminal-justice/racial-profiling){target=\"_blank\"} has been an issue in the U.S. for centuries.\n  \n  - U.S. police are [deployed at higher rates in some poor and Black neighborhoods](https://www.hrw.org/news/2019/09/12/interview-how-policing-one-us-city-hurts-black-and-poor-communities){target=\"_blank\"}.\n  \nWhat data and evidence do you think is needed to confirm if the statement is accurate? Moreover, what measures and statistical tests would allow us to integrate history and context? What variable associations might be used to assess these relationship?\n\n## Part II: Content\n\n---\n\n### A guiding example\n\nLet us return to an example mentioned last week: the [`yahoo_data`]() in the `critstats` package. This data comes from a *Yahoo! News* Race and Justice poll.\n\n![Image from Mass Humanities](img/wk7-a-4.jpg)\n\nA complete description of the data set is as follows:\n\n> Results from a Yahoo! News poll conducted by YouGov on May 29-31, 2020. In total 1060 U.S. adults were asked a series of questions regarding race and justice in the wake of the killing of George Floyd by a police officer. Results in this data set are percentages for the question, \"Do you think Blacks and Whites receive equal treatment from the police?\" For this particular question there were 1059 respondents.\n\n---\n\n### A guiding example\n\nLet us begin with a summary of responses to a survey sparked by the killing of George Floyd.\n\n| Response | Total |\n|:--:|:---:|\n| No | 700 |\n| Yes | 236 |\n\n: Summary of survey response data[^1] {.striped .hover}\n\n[^1]: Respondents who selected **'Not sure'** on the survey were moved from this analysis.\n\nThe study sample $n = 936$. Please take note of the table's footnote.\n\nAs of now, we know very little about the survey (i.e., the context has been stripped away).\n\n#### An initial question\n\nIs there a difference in the survey responses?\n\n---\n\n#### Framing proportions\n\nAs you learn about hypothesis testing, you want to understand the nature of variable associations. There are many approaches to how we measure associations. One we'll explore extensively is differences in proportions of two dichotomous variables.\n\nFirst, we add a third column to our table by computing the proportion in each row:\n\n$$ P(No) = \\frac{\\text{Number of respondents who replied No}}{n} $$\n\n$$ P(Yes) = \\frac{\\text{Number of respondents who replied Yes}}{n} $$\n\n---\n\n#### Understanding proportions\n\n| Response | Total | Proportion |\n|:--:|:---:|:---:|\n| No | 700 | $0.7478$ |\n| Yes | 236 |$0.2522$ |\n\n: Summary of survey response data with proportion column {.striped .hover}\n\nSo we have $P(No) = 0.7478$ and $P(Yes) = 0.2522$. \n\nThis is a sample. Be mindful of the notes about sampling and sampling error.\n\n**What can these proportions tell us about the data?**\n\n---\n\n### A closer look\n\nLet's look at a preview panel of the full data set.\n\n| ID | Race | Response |\n|:--:|---|---|\n| 1 | White | Yes |\n| 2 | White | Yes |\n|.|.|.|\n| 773 | Black | Yes |\n| 774 | Black | Yes |\n|..|..|..|\n| 874 | Hispanic | Yes |\n| 875 | Hispanic | Yes |\n|...|...|...|\n| $1059$ | Other | Not sure |\n\n: Preview of full survey response data set {.striped .hover}\n\n---\n\nWhen we format the data into tables, there are multiple categories to consider.\n\nIn the table below, the `race` variable is listed in rows.\n\n| Race | No | Yes |\n|------|------|------|\n| Black    | Black $\\cap$ No    | Black $\\cap$ Yes    |\n| Hispanic    | Hispanic $\\cap$ No    | Hispanic $\\cap$ Yes    |\n| Other    | Other $\\cap$ No    | Other $\\cap$ Yes    |\n| White | White $\\cap$ No | White $\\cap$ Yes |\n\n: Race in rows {#tbl-first}\n\nRecall that the $\\cap$ represents \"and\" while the $\\cup$ represents \"or\" in logic.\n\n---\n\nIn the table below, the `response` variable is listed in rows.\n\n| Response | Black | Hispanic | Other | White |\n|------|------|------|------|------|\n| No    | No $\\cap$ Black    | No $\\cap$ Hispanic    | No $\\cap$ Other    | No $\\cap$ White    |\n| Yes    | Yes $\\cap$ Black    | Yes $\\cap$ Hispanic    | Yes $\\cap$ Other    | Yes $\\cap$ White    |\n\n: Response in rows {#tbl-second}\n\n---\n\nWe use our understanding of probability to generate a reconstruction for the response 'No'.\n\n$$ P(No) = \\dfrac{\\text{No} \\cap \\text{Black}}{n} + \\dfrac{\\text{No} \\cap \\text{Hispanic}}{n} + \\dfrac{\\text{No} \\cap \\text{Other}}{n} + \\dfrac{\\text{No} \\cap \\text{White}}{n} $$\n\nWe generate a parallel construction for the response 'Yes'.\n\n$$ P(Yes) = \\dfrac{\\text{Yes} \\cap \\text{Black}}{n} + \\dfrac{\\text{Yes} \\cap \\text{Hispanic}}{n} + \\dfrac{\\text{Yes} \\cap \\text{Other}}{n} + \\dfrac{\\text{Yes} \\cap \\text{White}}{n} $$\n\n---\n\n#### Summary values\n\nAdding values to the table will give us a more complete picture of the data.\n\n| Response | Black | Hispanic | Other | White |\n|:--:|:---:|:---:|:---:|:---:|\n| No | 92 | 75 | 47 | 486 |\n| Yes | 6 | 15 | 14 | 201 |\n\n: Responses to a survey question by race {.striped .hover}\n\n---\n\n\nUse the table to calculate `Response` probabilities:\n\n| Response | Black | Hispanic | Other | White | Total |\n|:--:|:---:|:---:|:---:|:---:|---:|\n| No | 92 | 75 | 47 | 486 | 700 |\n| Yes | 6 | 15 | 14 | 201 | 236 |\n\n: Responses to a survey question by race {.striped .hover}\n\nGather response probabilities for `No` by dividing each cell by the sample size.\n\n$$ P(No) = \\dfrac{92}{936} + \\dfrac{75}{936} + \\dfrac{47}{936} + \\dfrac{486}{936} = \\dfrac{700}{936} = 0.7478 $$\nGather response probabilities for `Yes` by dividing each cell by the sample size.\n\n$$ P(Yes) = \\dfrac{6}{936} + \\dfrac{15}{936} + \\dfrac{14}{936} + \\dfrac{201}{936} = \\dfrac{236}{936} = 0.2522 $$\nWe will use this framing to compute proportions for each cell but in R.\n\n---\n\nGiven that we want to explore the data in more detail and understand any base associations, we need to revisit our framing and consider some additional tasks.\n\n### Returning to the framework\n\nA basic analysis goes a long way in determining our next steps.\n\nWith this base analytic exercises, you may want to ask: *What is the research question?*\n\nWhat are the **main** or **primary** theoretical constructions?\n\n  - First, examine the literature and annotate specific citations.\n  \n  - Next, construct a framework for the various interpretations.\n  \n    - What are the similarities across theoretical constructions?\n    \n    - What are the main differences across theoretical constructions?\n    \n    - How does a nuanced view of the history of the issue improve our understanding?\n\nBased on your background analyses, what is the hypothesis?\n\n---\n\n## Part III: Code\n\n---\n  \n#### Setting things up\n  \nAs a general rule, always load the appropriate libraries at the start of your analyses.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load our libraries\nlibrary(critstats)\nlibrary(tidyverse)\nlibrary(descr)\nlibrary(Hmisc)\n```\n:::\n\n\nIn this case:\n  \n  - `critstats` contains the `yahoo_data` that we'd like to analyze.\n  \n  - `tidyverse` contains the set of functions to help us work with our data\n  \n  - `descr` and `Hmisc` contain useful functions to analyze social science data.\n\nIf you receive an error, you may need to use the `install.packages()` commands first.\n\n---\n\n#### Load the data\n\nInspect the data documentation and contents of the data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# access the yahoo_data\n??yahoo_data\nyahoo_data # \"Do you think Blacks and Whites receive equal treatment from the police?\"\n```\n:::\n\n\nWhile the specific wording of the question may not fit our theoretical framing (e.g. `Blacks` and `Whites`), it is useful to consider what information and insights can be gathered from the data. \n\nHere, theory and the literature become important components to outlining your analytic plan.\n\n---\n\n#### Clean your data\n\nThe data in the `yahoo_data` set is already cleaned and prepped. However, when you conduct your own analyses, you will need to follow the series of steps outlined in previous assignments. For example, [Lab 1](labs/lab1.html) is a great resource on cleaning.\n\n---\n\n#### Understand your data\n\nGiven that we are analyzing categorical data, we will create a series of tables.\n\nThese tables will allow us to gather a sense of the data.\n\nOur first table will be of the variable `race_eth`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# create a table of the race_eth\ntable(yahoo_data$race_eth)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n   Black Hispanic    Other    White \n     101      104       82      772 \n```\n:::\n:::\n\n\nWhat do you notice? What do you wonder?\n\n---\n\n#### Understand your data\n\nOur second table will be of the variable `response`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# create a table of the race_eth\ntable(yahoo_data$response)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n      No Not sure      Yes \n     700      123      236 \n```\n:::\n:::\n\n\nWhat do you notice? What do you wonder?\n\n---\n\n#### Modify your data\n\nMake the necessary modifications to your data.\n\nHere I set the `yahoo_data` to `df` and rename the `race_eth` variable.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- yahoo_data # set the yahoo_data to df\ndf <- df %>% \n  rename(\"race\" = \"race_eth\") # rename the race_eth variable to race\n```\n:::\n\n\n---\n\n#### Get the sample size\n\nWhen looking at the table, it may be useful to get a sense of the *proportions*.\n\nWe'll begin with getting the sample size.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# get a quick count of the sample size\ncount(df) # the count function can collect the sample size, n, of a tibble\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 1\n      n\n  <int>\n1  1059\n```\n:::\n:::\n\n\nThe tables give us the **frequency** of each category.\n\nThe sample size will help us get the **relative frequency** of each category.\n\n---\n  \n#### Relative frequencies by race\n  \n  Get the relative frequencies for the `race` variable.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>% \n  count(race) %>% \n  mutate(prop = prop.table(n))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 × 3\n  race         n   prop\n  <chr>    <int>  <dbl>\n1 Black      101 0.0954\n2 Hispanic   104 0.0982\n3 Other       82 0.0774\n4 White      772 0.729 \n```\n:::\n:::\n\n\n---\n  \n#### Relative frequencies by response\n  \nGet the relative frequencies for the `response` variable.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>% \n  count(response) %>% \n  mutate(prop = prop.table(n))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 3\n  response     n  prop\n  <chr>    <int> <dbl>\n1 No         700 0.661\n2 Not sure   123 0.116\n3 Yes        236 0.223\n```\n:::\n:::\n\n\n---\n  \n#### Generate a `crosstab` of `race` and `response`\n  \n\n::: {.cell}\n\n```{.r .cell-code}\ncrosstab(df$response, df$race, plot=F)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Cell Contents \n|-------------------------|\n|                   Count | \n|-------------------------|\n\n=======================================================\n               df$race\ndf$response    Black   Hispanic   Other   White   Total\n-------------------------------------------------------\nNo                92         75      47     486     700\n-------------------------------------------------------\nNot sure           3         14      21      85     123\n-------------------------------------------------------\nYes                6         15      14     201     236\n-------------------------------------------------------\nTotal            101        104      82     772    1059\n=======================================================\n```\n:::\n:::\n\n\nWhat do you notice? What do you wonder?\n  \nSet `plot=T` if you want to see a visual plot of the data.\n\n---\n  \n#### Standardize the frequencies\n  \nRaw frequencies can be hard to read in a crosstab, especially since column totals are not equal.\n\nAdd `prop.c = T` to get column percentages\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncrosstab(df$response, df$race, plot=F, prop.c=T)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Cell Contents \n|-------------------------|\n|                   Count | \n|          Column Percent | \n|-------------------------|\n\n=======================================================\n               df$race\ndf$response    Black   Hispanic   Other   White   Total\n-------------------------------------------------------\nNo               92         75      47     486     700 \n               91.1%      72.1%   57.3%   63.0%        \n-------------------------------------------------------\nNot sure          3         14      21      85     123 \n                3.0%      13.5%   25.6%   11.0%        \n-------------------------------------------------------\nYes               6         15      14     201     236 \n                5.9%      14.4%   17.1%   26.0%        \n-------------------------------------------------------\nTotal           101        104      82     772    1059 \n                9.5%       9.8%    7.7%   72.9%        \n=======================================================\n```\n:::\n:::\n\n\nWe also refer to crosstabs as *contingency tables*; the percentages provide *conditional probabilities*.\n\nWhat do you notice? What do you wonder?\n  \n---\n  \n### Hypothesis testing with crosstab\n  \nDevelop (or refine) your research question(s).\n\nExamining the relationship between two variables.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# research inquiry: is there a relationship between the race and response variables?\n# data: survey results from the Yahoo! News race and justice poll\n# note(s): response contains three levels: Yes, No, and Not sure\n```\n:::\n\n\nAdd your research inquiry/question to your preamble.\n\nNotes help you remember import information for writing code. You can also put them in-line.\n\n---\n  \n### Null and alternative hypothesis for a $\\chi^2$ test are:\n  \n  - $H_0$: No relationship. The two variables are statistically independent.\n\n  - $H_1$: There is a relationship. The two variables are not statistically independent.\n\nNotice that $H_1$ does not give us information about the direction or strength of the relationships. To test the null hypothesis, we will calculate the $\\chi^2$ statistic:\n  \n  $$\\chi^2 = \\sum \\dfrac{(O-E)^2}{E}$$\n\nWhere\n\n  - $O$ is the observed frequency for each cell\n\n  - $E$ is the expected frequency for each cell\n\n    - The expected frequency is what we'd expected if there is no relationship ($H_0$ is true)\n    \n---\n\n#### Create a crosstab with raw frequencies\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncrosstab(df$response, df$race, plot=F)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Cell Contents \n|-------------------------|\n|                   Count | \n|-------------------------|\n\n=======================================================\n               df$race\ndf$response    Black   Hispanic   Other   White   Total\n-------------------------------------------------------\nNo                92         75      47     486     700\n-------------------------------------------------------\nNot sure           3         14      21      85     123\n-------------------------------------------------------\nYes                6         15      14     201     236\n-------------------------------------------------------\nTotal            101        104      82     772    1059\n=======================================================\n```\n:::\n:::\n\n\n---\n\n#### Sampling error\n\n*An important note about sampling error*\n\nThere appears to be a relationship between the variable `response` and `race`. \n\nHowever, the data are from a sample. We do not and should not infer that there is a relationship at the population level, but only for the sample data we are analyzing.\n\nEarlier, we saw the difference in proportions by the column differences for \"Yes\" and \"No\". Since we found that the overall population said \"No\" to the question of fair treatment, we want to take this into consideration when analyzing our data.\n\n---\n\n#### Gather the expected frequencies\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncrosstab(df$response, df$race,\n         expected=T, #Add expected frequency to each cell\n         plot=F)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Cell Contents \n|-------------------------|\n|                   Count | \n|         Expected Values | \n|-------------------------|\n\n=======================================================\n               df$race\ndf$response    Black   Hispanic   Other   White   Total\n-------------------------------------------------------\nNo                92         75      47     486     700\n                66.8       68.7    54.2   510.3        \n-------------------------------------------------------\nNot sure           3         14      21      85     123\n                11.7       12.1     9.5    89.7        \n-------------------------------------------------------\nYes                6         15      14     201     236\n                22.5       23.2    18.3   172.0        \n-------------------------------------------------------\nTotal            101        104      82     772    1059\n=======================================================\n```\n:::\n:::\n\n\n---\n\n#### Add the chi-square contributions\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncrosstab(df$response, df$race,\n         expected=T, #Add expected frequency to each cell\n         prop.chisq = T, #Total contribution of each cell \n         plot=F)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Cell Contents \n|-------------------------|\n|                   Count | \n|         Expected Values | \n| Chi-square contribution | \n|-------------------------|\n\n=========================================================\n               df$race\ndf$response     Black   Hispanic    Other   White   Total\n---------------------------------------------------------\nNo                 92         75       47     486     700\n                 66.8       68.7     54.2   510.3        \n                9.542      0.569    0.957   1.156        \n---------------------------------------------------------\nNot sure            3         14       21      85     123\n                 11.7       12.1      9.5    89.7        \n                6.498      0.305   13.828   0.243        \n---------------------------------------------------------\nYes                 6         15       14     201     236\n                 22.5       23.2     18.3   172.0        \n               12.107      2.885    1.000   4.874        \n---------------------------------------------------------\nTotal             101        104       82     772    1059\n=========================================================\n```\n:::\n:::\n\n\n---\n\n#### Calculate degrees of freedom\n\nWe have $$df_{\\chi^2} = (r-1)(c-1)$$ \n\nwhere r = number of rows in the table and c = number of columns in the table\n\n---\n\nChi-square critical values\n\n![Chi-square critical values](img/wk8-b-1.png)\n\n---\n\n#### Gather critical value of chi-square\n\n\n::: {.cell}\n\n```{.r .cell-code}\nqchisq(.05, 6, lower.tail=F)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 12.59159\n```\n:::\n:::\n\n\n---\n\n#### Get the chi-square statistic from R\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## get chi-square statistic\nchisq.test(df$response, df$race)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tPearson's Chi-squared test\n\ndata:  df$response and df$race\nX-squared = 53.964, df = 6, p-value = 7.5e-10\n```\n:::\n:::\n\n\n---\n\nOur focus should be on interpreting the output values.\n\nIn the output, you want to examine the following:\n\n  - Confirm $\\chi^2$ value and degrees of freedom.\n  \n  - Notice more precise information about the p-value\n  \n    - Use this value to make sense of your research inquiry\n    \n  - Does this p-value make sense *statistically* and *substantively*?\n  \n---\n\n#### describe some initial limitations of analysis\n\nAlways close out your analyses with a write up of limitations.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### limitation 1: sampling error\n\n### limitation 2: category reductions\n\n### limitation 3: cases dropped\n\n### limitation 4: chi-square test\n```\n:::\n\n\n---\n\n### **Next up**: Week 9\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}