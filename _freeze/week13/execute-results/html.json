{
  "hash": "6b5fcab2e9026b07cd12bb4fd9b6c78b",
  "result": {
    "markdown": "---\ntitle: \"DATA 202 - Week 13\"\nsubtitle: \"Multivariate analysis\"\nauthor: \"Nathan Alexander, PhD\"\ninstitute: \"Center for Applied Data Science and Analytics\"\nformat: \n  html: default\n  revealjs:\n    output-file: week13-slides.html\n    height: 900\n    width: 1600\n    smaller: false\n    scrollable: true\n    slide-number: c/t #< collapsed/total\n    logo: \"img/howard-logo.jpg\"\n    footer: \"[Course Data GitHub](https://github.com/data-202)\"\n    toc: false\n    theme: simple\n    echo: true\n    incremental: false\n---\n\n\n## Part I: Context\n\n### Framing social justice\n\nMultivariate analyses may require that we consider various intersections of social justice. Namely, rather than a single lens on an issue, we may be required to take an intersectional perspective with regards to a given *set* of social issues.\n\nThere are many different definitions of social justice. Through our course, we have examined different data and statistical analyses to better engage the various connections when measuring and modeling social justice. However, it is important to develop more specific ideations and frameworks as we delve deeper into our selection of various methodologies to explore data.\n\nEarlier, we considered *theory construction* as one method to examine distinct and interrelated concepts in the development of a statistical study. Theory construction, together with the importance of understanding the phenomenon of **social justice** requires that we review some of the key concepts and principles that can be accented by data analysis. \n\nImportantly, we generally want to prioritize theory and context before methodology.\n\n---\n\n### Understanding social justice\n\nWhen considering the different definitions of social justice, we want to consider the distinction between individual and collective frameworks for justice. This distinction allows us to explore the relationships between social issues and equality, as a foundational principle to understanding difference. However, when we consider the historical context, we are often required to extend our analyses beyond the blanket expressions for equality.\n\nEquality and equity are two concepts that are often discussed in the context of social justice and fairness. While they are related, they have distinct meanings.\n\n---\n\n::: {.callout-caution icon=\"false\"}\n### **Definitions**: Equality vs. Equity\n\n**Equality**: Equality refers to the state of being equal, particularly in terms of rights, opportunities, and treatment. It emphasizes providing everyone with the same resources, regardless of their circumstances or needs. In other words, equality means that everyone is treated identically, without discrimination or favoritism. The goal of equality is to ensure fairness and eliminate unfair advantages or disadvantages.\n\n**Equity**: Equity is about fairness and justice by taking into account the unique circumstances and needs of individuals, as well as the historical contexts. It recognizes that not everyone starts from the same place and that treating everyone equally may not result in true fairness. Equity aims to provide individuals with the resources and support they need to overcome systemic disadvantages and achieve equality of outcome. It involves allocating resources and opportunities based on the specific needs and circumstances of individuals or groups.\n:::\n\nMore generally, equality focuses on treating everyone the same, while equity emphasizes fairness by addressing individual or group-specific disadvantages and providing resources accordingly. Both concepts play an important role in promoting social justice and creating a more equitable society.\n\n![A surface explanation of equality vs. equity. Image from NACEweb.org](img/wk13-a-1.png)\n\n---\n\n#### Principles of social justice\n\nThere are many ways to take a theoretical approach to social justice, and often too many to list. As a result, it may be helpful for us to consider the principles of social justice as a framework to adapt your specific analyses (using real-world data) and your theoretical framework to a subset of these principles.\n\n| Principle  | Component 1  | Component 2  | Component 3  |\n|--------|--------|--------|--------|\n| Fairness  | Equal opportunity   | Systemic disadvantage  | Reducing inequality   |\n| Solidarity   | Social cohesion  | Self-determination   | Collective responsibility   |\n| Dignity | Human rights   | Worth of all  | Combating marginalization   |\n\n: Principles of social justice {.striped .hover}\n\n---\n\n#### Dimensions of social justice\n\nJust as there are many theoretical entry points to social justice, there are also dimensional components that may be used to help focus your analysis. These dimensions help to clarify the specific principles noted above in a more concrete way. Importantly, these principles and dimensions are neither rigid or fixed.\n\n| Dimension  | Component 1  | Component 2  | Component 3  |\n|--------|--------|--------|--------|\n| Economic  | Poverty and income inequality   | Fair distribution of resources and wealth  | Access to education, employment, healthcare   |\n| Environmental   | Protecting and preserving the environment | Mitigating environmental degradation  | Ensuring equitable access to natural resources  |\n| Racial and ethnic | Combating racism and discrimination  | Promoting racial and ethnic equality | Recognizing and valuing cultural diversity  |\n| Gender and LGBTQ+ | Achieving gender equality and empowerment | Addressing discrimination based on sexuality or gender expression | Ensuring equal rights for all genders |\n\n: Dimensions of social justice {.striped .hover}\n\n---\n\n![A sample framework for racial justice in education. Image from NEA.org](img/wk13-a-2.jpg)\n\n---\n\n#### Strategies to promote social justice\n\nAs you consider the various principles and dimensions in your theoretical framing of a particular social issue, data can be used as a method to promote social justice by examining attitudes around the various principles and dimensions (e.g., consider variables in the GSS data), examining real-world data on issues of social injustice (e.g., consider the fatal force database), and a host of other methods that center data analysis as a form of political knowledge.\n\nThere are, however, specific ways to think about the implications of a particular analytical study. These methods can help to further refine the role and goals of any particular modeling of a social justice issues. Importantly, considering the various contexts to which an issue intersections is also important (i.e., global, national, and/or local).\n\n---\n\n  - Advocacy and activism\n  \n    -- Using data to raise awareness about social issues \n    \n    -- Mobilizing for policy change with various statistical models\n    \n    -- Supporting grassroots movements using quantitative information\n\n---\n\n  - Policy interventions\n  \n    -- Analyses to help examine and implement laws and regulations\n    \n    -- Quantification to help redistribute resources and opportunities\n    \n    -- Models to help inform inclusive social welfare programs\n\n---\n\n  - Education and awareness\n  \n    -- Promoting critical thinking and empathy\n    \n    -- Incorporating social justice into curricula\n    \n    -- Engaging in dialogue and community outreach\n    \n    -- Calls to action for promoting a more just and equitable society\n\n---\n\n## Part II: Content\n\nMultiple Variable Analysis and Multivariate Analysis are two terms often used in statistics and research methodology to describe different approaches to analyzing data involving multiple variables. While they share similarities, there are distinct differences between these two concepts.\n\n---\n\n### Multivariable vs. Multivariate\n\n*Multiple variable analysis* investigates the influence of individual independent variables on a single dependent variable, while *multivariate analysis* explores the relationships and patterns among multiple variables simultaneously. Multiple Variable Analysis is often used when studying the effects of specific factors, while multivariate analysis is employed to uncover broader patterns and structures within a dataset. Both approaches are valuable in data analysis, and the choice between them depends on the research objectives and the nature of the data being analyzed.\n\n::: {.callout-caution icon=\"false\"}\n#### **Definitions**: Multiple variable analysis vs. Multivariate analysis\n\n**Multiple Variable Analysis**: Multiple Variable Analysis refers to the process of examining the relationships between several independent variables and a single dependent variable. It aims to understand how each independent variable influences or predicts the dependent variable individually, while controlling for other variables. In this analysis, each independent variable is analyzed separately, often using techniques such as regression analysis or analysis of variance (ANOVA).\n\n**Multivariate Analysis**: Multivariate Analysis involves the simultaneous analysis of multiple dependent and independent variables. It aims to explore the relationships and patterns among multiple variables, considering them as a whole. This analysis technique allows for the examination of complex interactions and associations between variables, providing a more comprehensive understanding of the data.\n:::\n\n---\n\n#### Key characteristics of multiple variable analysis\n\n  1. **Focus**: Examining the impact of individual independent variables on a single dependent variable.\n  \n  2. **Analytic approach**: Each independent variable is analyzed separately, allowing for isolation of their effects.\n  \n  3. **Purpose**: To identify the individual contributions and significance of multiple variables in explaining the variation in the dependent variable.\n  \n  4. **Statistical techniques**: Common techniques include simple linear regression, multiple linear regression, and ANOVA.\n  \n---\n\n#### Key characteristics of multivariate analysis\n\n  1. **Focus**: Examining the relationships and interactions among multiple variables simultaneously.\n  \n  2. **Analytic approach**: Considering all variables together, accounting for their joint effects and potential interdependence.\n  \n  3. **Purpose**: To explore patterns, associations, and structures within the data, identifying underlying factors or dimensions.\n  \n  4. **Statistical techniques**: Common techniques include factor analysis, principal component analysis, cluster analysis, and structural equation modeling.\n\n---\n\n### Examples of multivariate analysis techniques\n\n  - *Principal component analysis (PCA)*: PCA is used to reduce the dimensionality of data by transforming it into a new set of uncorrelated variables called principal components. R functions for PCA include `prcomp()` and `princomp()`.\n\n  - *Factor analysis*: Factor Analysis aims to identify latent factors that explain the correlations among observed variables. R offers functions like `factanal()` and `psych::fa()` for conducting factor analysis.\n\n  - *Canonical correlation analysis (CCA)*: CCA examines the relationships between two sets of variables and identifies the linear combinations of each set that have maximum correlation with each other. The `CCA()` function in the stats package can be used for this analysis.\n\n  - *Cluster analysis*: Cluster Analysis groups similar observations into clusters based on the similarity of their characteristics. R provides various clustering techniques, such as k-means clustering (`kmeans()`), hierarchical clustering (`hclust()`), and model-based clustering (`Mclust()`).\n\n  - *Discriminant analysis*: Discriminant Analysis aims to find a linear combination of variables that maximally separate predefined groups or classes. R offers functions like `lda()` and `qda()` for performing Linear Discriminant Analysis (LDA) and Quadratic Discriminant Analysis (QDA), respectively.\n\n  - *Multivariate regression*: Multivariate Regression extends simple linear regression to multiple response variables. The `lm()` function in R can be used for multivariate regression analysis.\n\n  - *Multivariate analysis of variance (MANOVA)*: MANOVA extends the analysis of variance (ANOVA) to multiple response variables simultaneously. The `manova()` function in R can be used for MANOVA.\n\n  - *Multidimensional scaling (MDS)*: MDS visualizes the similarity or dissimilarity between objects in a lower-dimensional space. R provides functions like `cmdscale()` and `isoMDS()` for performing MDS.\n\n  - *Structural Equation Modeling (SEM)*: SEM is a comprehensive framework for testing complex relationships among variables. R packages like lavaan and sem offer functionalities for conducting SEM.\n\n  - *Correspondence Analysis*: Correspondence Analysis explores the associations between categorical variables and visualizes them in a low-dimensional space. The `ca()` function in the ca package is commonly used for correspondence analysis.\n\nWe will consider a few of these models in our final weeks for the course.\n\n---\n\n\n::: {.cell}\n\n:::\n\n\n\n## Part III: Code\n\nThis week, we will run through another sample analysis using the `gssr` package.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install packages\ninstall.packages(\"remotes\", repos = \"http://cran.us.r-project.org\")\ninstall.packages(\"tidyverse\", repos = \"http://cran.us.r-project.org\")\ninstall.packages(\"tidyr\", repos = \"http://cran.us.r-project.org\")\ninstall.packages(\"survey\", repos = \"http://cran.us.r-project.org\")\ninstall.packages(\"srvyr\", repos = \"http://cran.us.r-project.org\")\n\n# load gssr package\nremotes::install_github(\"kjhealy/gssr\")\n\n# load libraries\nlibrary(gssr)\nlibrary(critstats)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(haven)\nlibrary(tibble)\nlibrary(survey)\nlibrary(srvyr)\n```\n:::\n\n\n---\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load the data\ndata(gss_all)\ndata(gss_doc)\n\n# find out which questions were asked in which years\ngss_which_years(gss_all, educ) %>% print(n= Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 33 × 2\n    year educ \n   <dbl> <lgl>\n 1  1972 TRUE \n 2  1973 TRUE \n 3  1974 TRUE \n 4  1975 TRUE \n 5  1976 TRUE \n 6  1977 TRUE \n 7  1978 TRUE \n 8  1980 TRUE \n 9  1982 TRUE \n10  1983 TRUE \n11  1984 TRUE \n12  1985 TRUE \n13  1986 TRUE \n14  1987 TRUE \n15  1988 TRUE \n16  1989 TRUE \n17  1990 TRUE \n18  1991 TRUE \n19  1993 TRUE \n20  1994 TRUE \n21  1996 TRUE \n22  1998 TRUE \n23  2000 TRUE \n24  2002 TRUE \n25  2004 TRUE \n26  2006 TRUE \n27  2008 TRUE \n28  2010 TRUE \n29  2012 TRUE \n30  2014 TRUE \n31  2016 TRUE \n32  2018 TRUE \n33  2021 TRUE \n```\n:::\n\n```{.r .cell-code}\ngss_which_years(gss_all, age) %>% print(n= Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 33 × 2\n    year age  \n   <dbl> <lgl>\n 1  1972 TRUE \n 2  1973 TRUE \n 3  1974 TRUE \n 4  1975 TRUE \n 5  1976 TRUE \n 6  1977 TRUE \n 7  1978 TRUE \n 8  1980 TRUE \n 9  1982 TRUE \n10  1983 TRUE \n11  1984 TRUE \n12  1985 TRUE \n13  1986 TRUE \n14  1987 TRUE \n15  1988 TRUE \n16  1989 TRUE \n17  1990 TRUE \n18  1991 TRUE \n19  1993 TRUE \n20  1994 TRUE \n21  1996 TRUE \n22  1998 TRUE \n23  2000 TRUE \n24  2002 TRUE \n25  2004 TRUE \n26  2006 TRUE \n27  2008 TRUE \n28  2010 TRUE \n29  2012 TRUE \n30  2014 TRUE \n31  2016 TRUE \n32  2018 TRUE \n33  2021 TRUE \n```\n:::\n\n```{.r .cell-code}\ngss_which_years(gss_all, degree) %>% print(n= Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 33 × 2\n    year degree\n   <dbl> <lgl> \n 1  1972 TRUE  \n 2  1973 TRUE  \n 3  1974 TRUE  \n 4  1975 TRUE  \n 5  1976 TRUE  \n 6  1977 TRUE  \n 7  1978 TRUE  \n 8  1980 TRUE  \n 9  1982 TRUE  \n10  1983 TRUE  \n11  1984 TRUE  \n12  1985 TRUE  \n13  1986 TRUE  \n14  1987 TRUE  \n15  1988 TRUE  \n16  1989 TRUE  \n17  1990 TRUE  \n18  1991 TRUE  \n19  1993 TRUE  \n20  1994 TRUE  \n21  1996 TRUE  \n22  1998 TRUE  \n23  2000 TRUE  \n24  2002 TRUE  \n25  2004 TRUE  \n26  2006 TRUE  \n27  2008 TRUE  \n28  2010 TRUE  \n29  2012 TRUE  \n30  2014 TRUE  \n31  2016 TRUE  \n32  2018 TRUE  \n33  2021 TRUE  \n```\n:::\n\n```{.r .cell-code}\ngss_which_years(gss_all, wtssps) %>% print(n= Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 33 × 2\n    year wtssps\n   <dbl> <lgl> \n 1  1972 FALSE \n 2  1973 FALSE \n 3  1974 FALSE \n 4  1975 FALSE \n 5  1976 FALSE \n 6  1977 FALSE \n 7  1978 FALSE \n 8  1980 FALSE \n 9  1982 FALSE \n10  1983 FALSE \n11  1984 FALSE \n12  1985 FALSE \n13  1986 FALSE \n14  1987 FALSE \n15  1988 FALSE \n16  1989 FALSE \n17  1990 FALSE \n18  1991 FALSE \n19  1993 FALSE \n20  1994 FALSE \n21  1996 FALSE \n22  1998 FALSE \n23  2000 FALSE \n24  2002 FALSE \n25  2004 FALSE \n26  2006 FALSE \n27  2008 FALSE \n28  2010 FALSE \n29  2012 FALSE \n30  2014 FALSE \n31  2016 FALSE \n32  2018 FALSE \n33  2021 TRUE  \n```\n:::\n\n```{.r .cell-code}\ngss_which_years(gss_all, vpsu) %>% print(n = Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 33 × 2\n    year vpsu \n   <dbl> <lgl>\n 1  1972 FALSE\n 2  1973 FALSE\n 3  1974 FALSE\n 4  1975 TRUE \n 5  1976 TRUE \n 6  1977 TRUE \n 7  1978 TRUE \n 8  1980 TRUE \n 9  1982 TRUE \n10  1983 TRUE \n11  1984 TRUE \n12  1985 TRUE \n13  1986 TRUE \n14  1987 TRUE \n15  1988 TRUE \n16  1989 TRUE \n17  1990 TRUE \n18  1991 TRUE \n19  1993 TRUE \n20  1994 TRUE \n21  1996 TRUE \n22  1998 TRUE \n23  2000 TRUE \n24  2002 TRUE \n25  2004 TRUE \n26  2006 TRUE \n27  2008 TRUE \n28  2010 TRUE \n29  2012 TRUE \n30  2014 TRUE \n31  2016 TRUE \n32  2018 TRUE \n33  2021 TRUE \n```\n:::\n\n```{.r .cell-code}\ngss_all %>%\n  gss_which_years(c(\"racdif1\", \"racdif2\", \"racdif3\", \"racdif4\", \"raceacs2\")) %>%\n  print(n = Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 33 × 6\n    year racdif1 racdif2 racdif3 racdif4 raceacs2\n   <dbl> <lgl>   <lgl>   <lgl>   <lgl>   <lgl>   \n 1  1972 FALSE   FALSE   FALSE   FALSE   FALSE   \n 2  1973 FALSE   FALSE   FALSE   FALSE   FALSE   \n 3  1974 FALSE   FALSE   FALSE   FALSE   FALSE   \n 4  1975 FALSE   FALSE   FALSE   FALSE   FALSE   \n 5  1976 FALSE   FALSE   FALSE   FALSE   FALSE   \n 6  1977 TRUE    TRUE    TRUE    TRUE    FALSE   \n 7  1978 FALSE   FALSE   FALSE   FALSE   FALSE   \n 8  1980 FALSE   FALSE   FALSE   FALSE   FALSE   \n 9  1982 FALSE   FALSE   FALSE   FALSE   FALSE   \n10  1983 FALSE   FALSE   FALSE   FALSE   FALSE   \n11  1984 FALSE   FALSE   FALSE   FALSE   FALSE   \n12  1985 TRUE    TRUE    TRUE    TRUE    FALSE   \n13  1986 TRUE    TRUE    TRUE    TRUE    FALSE   \n14  1987 FALSE   FALSE   FALSE   FALSE   FALSE   \n15  1988 TRUE    TRUE    TRUE    TRUE    FALSE   \n16  1989 TRUE    TRUE    TRUE    TRUE    FALSE   \n17  1990 TRUE    TRUE    TRUE    TRUE    FALSE   \n18  1991 TRUE    TRUE    TRUE    TRUE    FALSE   \n19  1993 TRUE    TRUE    TRUE    TRUE    FALSE   \n20  1994 TRUE    TRUE    TRUE    TRUE    FALSE   \n21  1996 TRUE    TRUE    TRUE    TRUE    FALSE   \n22  1998 TRUE    TRUE    TRUE    TRUE    FALSE   \n23  2000 TRUE    TRUE    TRUE    TRUE    FALSE   \n24  2002 TRUE    TRUE    TRUE    TRUE    FALSE   \n25  2004 TRUE    TRUE    TRUE    TRUE    FALSE   \n26  2006 TRUE    TRUE    TRUE    TRUE    FALSE   \n27  2008 TRUE    TRUE    TRUE    TRUE    FALSE   \n28  2010 TRUE    TRUE    TRUE    TRUE    FALSE   \n29  2012 TRUE    TRUE    TRUE    TRUE    FALSE   \n30  2014 TRUE    TRUE    TRUE    TRUE    FALSE   \n31  2016 TRUE    TRUE    TRUE    TRUE    FALSE   \n32  2018 TRUE    TRUE    TRUE    TRUE    FALSE   \n33  2021 TRUE    TRUE    TRUE    TRUE    TRUE    \n```\n:::\n:::\n\n\n---\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# View information about a specific variable\ngss_doc %>% filter(id == \"racdif1\" | id == \"racdif2\" | id == \"racdif3\" | id == \"racdif4\" | id == \"raceacs2\") %>% \n  select(id, description, text)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 × 3\n  id      description                                 text                      \n  <chr>   <chr>                                       <chr>                     \n1 racdif1 Differences due to discrimination           266. On the average (negr…\n2 racdif2 Differences due to in-born learning ability 266. On the average (negr…\n3 racdif3 Differences due to lack of education        266. On the average (negr…\n4 racdif4 Differences due to lack of will             266. On the average (negr…\n```\n:::\n:::\n\n\n---\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Take a look at the variable marginals\ngss_doc %>% filter(id == \"racdif1\" | id == \"racdif2\" | id == \"racdif3\" | id == \"racdif4\" | id == \"raceacs2\") %>%\n  select(marginals) %>% \n  unnest(cols = c(marginals))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 24 × 5\n   percent n      value label id     \n     <dbl> <chr>  <chr> <chr> <chr>  \n 1    40.3 11,703 1     YES   RACDIF1\n 2    59.7 17,309 2     NO    RACDIF1\n 3    NA   34,312 0     IAP   RACDIF1\n 4    NA   1,353  8     DK    RACDIF1\n 5    NA   137    9     <NA>  RACDIF1\n 6   100   64,814 <NA>  Total RACDIF1\n 7    13.1 3,859  1     YES   RACDIF2\n 8    86.9 25,588 2     NO    RACDIF2\n 9    NA   34,312 0     IAP   RACDIF2\n10    NA   942    8     DK    RACDIF2\n# ℹ 14 more rows\n```\n:::\n:::\n\n\n---\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# take a look at the variable's properties\ngss_doc %>% filter(id == \"racdif1\" | id == \"racdif2\" | id == \"racdif3\" | id == \"racdif4\" | id == \"raceacs2\") %>%\n  select(properties) %>%\n  unnest(cols = c(properties))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 12 × 3\n   property           value   id     \n   <chr>              <chr>   <chr>  \n 1 Data type          numeric RACDIF1\n 2 Missing-data codes 0,8,9   RACDIF1\n 3 Record/column      1/1139  RACDIF1\n 4 Data type          numeric RACDIF2\n 5 Missing-data codes 0,8,9   RACDIF2\n 6 Record/column      1/1140  RACDIF2\n 7 Data type          numeric RACDIF3\n 8 Missing-data codes 0,8,9   RACDIF3\n 9 Record/column      1/1141  RACDIF3\n10 Data type          numeric RACDIF4\n11 Missing-data codes 0,8,9   RACDIF4\n12 Record/column      1/1142  RACDIF4\n```\n:::\n:::\n\n\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# View marginals and properties for more than one categorical variable\ngss_get_marginals(varnames = c(\"racdif1\", \"racdif2\", \"racdif3\", \"racdif4\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 24 × 6\n   variable percent     n value label id     \n   <chr>      <dbl> <int> <chr> <chr> <chr>  \n 1 racdif1     40.3 11703 1     YES   RACDIF1\n 2 racdif1     59.7 17309 2     NO    RACDIF1\n 3 racdif1     NA   34312 0     IAP   RACDIF1\n 4 racdif1     NA    1353 8     DK    RACDIF1\n 5 racdif1     NA     137 9     <NA>  RACDIF1\n 6 racdif1    100   64814 <NA>  Total RACDIF1\n 7 racdif2     13.1  3859 1     YES   RACDIF2\n 8 racdif2     86.9 25588 2     NO    RACDIF2\n 9 racdif2     NA   34312 0     IAP   RACDIF2\n10 racdif2     NA     942 8     DK    RACDIF2\n# ℹ 14 more rows\n```\n:::\n\n```{.r .cell-code}\ngss_get_props(varnames = c(\"racdif1\", \"racdif2\", \"racdif3\", \"racdif4\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 12 × 4\n   variable property           value   id     \n   <chr>    <chr>              <chr>   <chr>  \n 1 racdif1  Data type          numeric RACDIF1\n 2 racdif1  Missing-data codes 0,8,9   RACDIF1\n 3 racdif1  Record/column      1/1139  RACDIF1\n 4 racdif2  Data type          numeric RACDIF2\n 5 racdif2  Missing-data codes 0,8,9   RACDIF2\n 6 racdif2  Record/column      1/1140  RACDIF2\n 7 racdif3  Data type          numeric RACDIF3\n 8 racdif3  Missing-data codes 0,8,9   RACDIF3\n 9 racdif3  Record/column      1/1141  RACDIF3\n10 racdif4  Data type          numeric RACDIF4\n11 racdif4  Missing-data codes 0,8,9   RACDIF4\n12 racdif4  Record/column      1/1142  RACDIF4\n```\n:::\n:::\n\n\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# find out which questions were asked in which years\ngss_which_years(gss_all, educ) %>% print(n= Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 33 × 2\n    year educ \n   <dbl> <lgl>\n 1  1972 TRUE \n 2  1973 TRUE \n 3  1974 TRUE \n 4  1975 TRUE \n 5  1976 TRUE \n 6  1977 TRUE \n 7  1978 TRUE \n 8  1980 TRUE \n 9  1982 TRUE \n10  1983 TRUE \n11  1984 TRUE \n12  1985 TRUE \n13  1986 TRUE \n14  1987 TRUE \n15  1988 TRUE \n16  1989 TRUE \n17  1990 TRUE \n18  1991 TRUE \n19  1993 TRUE \n20  1994 TRUE \n21  1996 TRUE \n22  1998 TRUE \n23  2000 TRUE \n24  2002 TRUE \n25  2004 TRUE \n26  2006 TRUE \n27  2008 TRUE \n28  2010 TRUE \n29  2012 TRUE \n30  2014 TRUE \n31  2016 TRUE \n32  2018 TRUE \n33  2021 TRUE \n```\n:::\n\n```{.r .cell-code}\ngss_which_years(gss_all, age) %>% print(n= Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 33 × 2\n    year age  \n   <dbl> <lgl>\n 1  1972 TRUE \n 2  1973 TRUE \n 3  1974 TRUE \n 4  1975 TRUE \n 5  1976 TRUE \n 6  1977 TRUE \n 7  1978 TRUE \n 8  1980 TRUE \n 9  1982 TRUE \n10  1983 TRUE \n11  1984 TRUE \n12  1985 TRUE \n13  1986 TRUE \n14  1987 TRUE \n15  1988 TRUE \n16  1989 TRUE \n17  1990 TRUE \n18  1991 TRUE \n19  1993 TRUE \n20  1994 TRUE \n21  1996 TRUE \n22  1998 TRUE \n23  2000 TRUE \n24  2002 TRUE \n25  2004 TRUE \n26  2006 TRUE \n27  2008 TRUE \n28  2010 TRUE \n29  2012 TRUE \n30  2014 TRUE \n31  2016 TRUE \n32  2018 TRUE \n33  2021 TRUE \n```\n:::\n\n```{.r .cell-code}\ngss_which_years(gss_all, degree) %>% print(n= Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 33 × 2\n    year degree\n   <dbl> <lgl> \n 1  1972 TRUE  \n 2  1973 TRUE  \n 3  1974 TRUE  \n 4  1975 TRUE  \n 5  1976 TRUE  \n 6  1977 TRUE  \n 7  1978 TRUE  \n 8  1980 TRUE  \n 9  1982 TRUE  \n10  1983 TRUE  \n11  1984 TRUE  \n12  1985 TRUE  \n13  1986 TRUE  \n14  1987 TRUE  \n15  1988 TRUE  \n16  1989 TRUE  \n17  1990 TRUE  \n18  1991 TRUE  \n19  1993 TRUE  \n20  1994 TRUE  \n21  1996 TRUE  \n22  1998 TRUE  \n23  2000 TRUE  \n24  2002 TRUE  \n25  2004 TRUE  \n26  2006 TRUE  \n27  2008 TRUE  \n28  2010 TRUE  \n29  2012 TRUE  \n30  2014 TRUE  \n31  2016 TRUE  \n32  2018 TRUE  \n33  2021 TRUE  \n```\n:::\n\n```{.r .cell-code}\ngss_which_years(gss_all, wtssps) %>% print(n= Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 33 × 2\n    year wtssps\n   <dbl> <lgl> \n 1  1972 FALSE \n 2  1973 FALSE \n 3  1974 FALSE \n 4  1975 FALSE \n 5  1976 FALSE \n 6  1977 FALSE \n 7  1978 FALSE \n 8  1980 FALSE \n 9  1982 FALSE \n10  1983 FALSE \n11  1984 FALSE \n12  1985 FALSE \n13  1986 FALSE \n14  1987 FALSE \n15  1988 FALSE \n16  1989 FALSE \n17  1990 FALSE \n18  1991 FALSE \n19  1993 FALSE \n20  1994 FALSE \n21  1996 FALSE \n22  1998 FALSE \n23  2000 FALSE \n24  2002 FALSE \n25  2004 FALSE \n26  2006 FALSE \n27  2008 FALSE \n28  2010 FALSE \n29  2012 FALSE \n30  2014 FALSE \n31  2016 FALSE \n32  2018 FALSE \n33  2021 TRUE  \n```\n:::\n\n```{.r .cell-code}\ngss_which_years(gss_all, vpsu) %>% print(n = Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 33 × 2\n    year vpsu \n   <dbl> <lgl>\n 1  1972 FALSE\n 2  1973 FALSE\n 3  1974 FALSE\n 4  1975 TRUE \n 5  1976 TRUE \n 6  1977 TRUE \n 7  1978 TRUE \n 8  1980 TRUE \n 9  1982 TRUE \n10  1983 TRUE \n11  1984 TRUE \n12  1985 TRUE \n13  1986 TRUE \n14  1987 TRUE \n15  1988 TRUE \n16  1989 TRUE \n17  1990 TRUE \n18  1991 TRUE \n19  1993 TRUE \n20  1994 TRUE \n21  1996 TRUE \n22  1998 TRUE \n23  2000 TRUE \n24  2002 TRUE \n25  2004 TRUE \n26  2006 TRUE \n27  2008 TRUE \n28  2010 TRUE \n29  2012 TRUE \n30  2014 TRUE \n31  2016 TRUE \n32  2018 TRUE \n33  2021 TRUE \n```\n:::\n\n```{.r .cell-code}\n# use the pipe to find out the years for multiple variables\ngss_all %>%\n  gss_which_years(c(\"racdif1\", \"racdif2\", \"racdif3\", \"racdif4\", \"raceacs2\")) %>%\n  print(n = Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 33 × 6\n    year racdif1 racdif2 racdif3 racdif4 raceacs2\n   <dbl> <lgl>   <lgl>   <lgl>   <lgl>   <lgl>   \n 1  1972 FALSE   FALSE   FALSE   FALSE   FALSE   \n 2  1973 FALSE   FALSE   FALSE   FALSE   FALSE   \n 3  1974 FALSE   FALSE   FALSE   FALSE   FALSE   \n 4  1975 FALSE   FALSE   FALSE   FALSE   FALSE   \n 5  1976 FALSE   FALSE   FALSE   FALSE   FALSE   \n 6  1977 TRUE    TRUE    TRUE    TRUE    FALSE   \n 7  1978 FALSE   FALSE   FALSE   FALSE   FALSE   \n 8  1980 FALSE   FALSE   FALSE   FALSE   FALSE   \n 9  1982 FALSE   FALSE   FALSE   FALSE   FALSE   \n10  1983 FALSE   FALSE   FALSE   FALSE   FALSE   \n11  1984 FALSE   FALSE   FALSE   FALSE   FALSE   \n12  1985 TRUE    TRUE    TRUE    TRUE    FALSE   \n13  1986 TRUE    TRUE    TRUE    TRUE    FALSE   \n14  1987 FALSE   FALSE   FALSE   FALSE   FALSE   \n15  1988 TRUE    TRUE    TRUE    TRUE    FALSE   \n16  1989 TRUE    TRUE    TRUE    TRUE    FALSE   \n17  1990 TRUE    TRUE    TRUE    TRUE    FALSE   \n18  1991 TRUE    TRUE    TRUE    TRUE    FALSE   \n19  1993 TRUE    TRUE    TRUE    TRUE    FALSE   \n20  1994 TRUE    TRUE    TRUE    TRUE    FALSE   \n21  1996 TRUE    TRUE    TRUE    TRUE    FALSE   \n22  1998 TRUE    TRUE    TRUE    TRUE    FALSE   \n23  2000 TRUE    TRUE    TRUE    TRUE    FALSE   \n24  2002 TRUE    TRUE    TRUE    TRUE    FALSE   \n25  2004 TRUE    TRUE    TRUE    TRUE    FALSE   \n26  2006 TRUE    TRUE    TRUE    TRUE    FALSE   \n27  2008 TRUE    TRUE    TRUE    TRUE    FALSE   \n28  2010 TRUE    TRUE    TRUE    TRUE    FALSE   \n29  2012 TRUE    TRUE    TRUE    TRUE    FALSE   \n30  2014 TRUE    TRUE    TRUE    TRUE    FALSE   \n31  2016 TRUE    TRUE    TRUE    TRUE    FALSE   \n32  2018 TRUE    TRUE    TRUE    TRUE    FALSE   \n33  2021 TRUE    TRUE    TRUE    TRUE    TRUE    \n```\n:::\n:::\n\n\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# subset data for 2021\ngss21 <- gss_all %>% filter(year == 2021)\ndf <- gss21 %>% \n  select(c(\"vpsu\", \"age\", \"educ\", \"degree\", \"racdif1\", \"racdif2\", \"racdif3\", \"racdif4\", \"raceacs2\", \"wtssps\", \"vstrat\")) %>%\n  mutate(young = ifelse(age < 26, \"yes\", \"no\")) %>%  # create variable for 25 or younger\n  drop_na() # drop all missing values\n\n# check the data\nsapply(df, function(x) sum(is.na(x)))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    vpsu      age     educ   degree  racdif1  racdif2  racdif3  racdif4 \n       0        0        0        0        0        0        0        0 \nraceacs2   wtssps   vstrat    young \n       0        0        0        0 \n```\n:::\n\n```{.r .cell-code}\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2,376 × 12\n    vpsu age       educ  degree  racdif1 racdif2 racdif3 racdif4 raceacs2 wtssps\n   <dbl> <dbl+lbl> <dbl> <dbl+l> <dbl+l> <dbl+l> <dbl+l> <dbl+l> <dbl+lb>  <dbl>\n 1    14 60        16    3 [bac… 1 [yes] 2 [no]  1 [yes] 2 [no]  0 [no]    0.320\n 2   183 33        17    3 [bac… 2 [no]  2 [no]  2 [no]  2 [no]  1 [yes]   0.335\n 3   116 20        12    1 [hig… 1 [yes] 2 [no]  1 [yes] 2 [no]  0 [no]    7.56 \n 4   259 76        13    1 [hig… 1 [yes] 2 [no]  1 [yes] 2 [no]  0 [no]    1.38 \n 5   232 37        11    0 [les… 1 [yes] 2 [no]  2 [no]  2 [no]  0 [no]    2.34 \n 6   144 21        14    1 [hig… 1 [yes] 2 [no]  1 [yes] 2 [no]  0 [no]    3.90 \n 7   144 75        18    4 [gra… 1 [yes] 2 [no]  1 [yes] 2 [no]  0 [no]    0.707\n 8   199 22        15    2 [ass… 1 [yes] 2 [no]  1 [yes] 2 [no]  0 [no]    3.15 \n 9   199 33        17    4 [gra… 1 [yes] 2 [no]  1 [yes] 2 [no]  0 [no]    0.980\n10    82 31        16    3 [bac… 1 [yes] 2 [no]  1 [yes] 2 [no]  0 [no]    0.631\n# ℹ 2,366 more rows\n# ℹ 2 more variables: vstrat <dbl>, young <chr>\n```\n:::\n:::\n\n\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# following in line from the `gssr` package documentation we will label variables by type\ncat_vars = c(\"degree\", \"racdif1\", \"racdif2\", \"racdif3\", \"racdif4\", \"raceacs2\")\ncont_vars = c(\"age\", \"educ\")\nwt_vars = c(\"wtssps\")\n\n# use variable lists to mutate the variables\ndfc <- df %>% # create a clean data set\n  mutate(wtssps = as.numeric(wtssps)) %>% \n  mutate(across(all_of(cat_vars), forcats::as_factor))\ndfc\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2,376 × 12\n    vpsu age       educ   degree racdif1 racdif2 racdif3 racdif4 raceacs2 wtssps\n   <dbl> <dbl+lbl> <dbl+> <fct>  <fct>   <fct>   <fct>   <fct>   <fct>     <dbl>\n 1    14 60        16     bache… yes     no      yes     no      no        0.320\n 2   183 33        17     bache… no      no      no      no      yes       0.335\n 3   116 20        12     high … yes     no      yes     no      no        7.56 \n 4   259 76        13     high … yes     no      yes     no      no        1.38 \n 5   232 37        11     less … yes     no      no      no      no        2.34 \n 6   144 21        14     high … yes     no      yes     no      no        3.90 \n 7   144 75        18     gradu… yes     no      yes     no      no        0.707\n 8   199 22        15     assoc… yes     no      yes     no      no        3.15 \n 9   199 33        17     gradu… yes     no      yes     no      no        0.980\n10    82 31        16     bache… yes     no      yes     no      no        0.631\n# ℹ 2,366 more rows\n# ℹ 2 more variables: vstrat <dbl>, young <chr>\n```\n:::\n:::\n\n\n---\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# INTEGRATE THE SURVEY WEIGHTS\n\n# show calculations before survey weights for one variable (remove n values)\ndfc %>% \n  group_by(degree, young, racdif1) %>% \n  tally() %>% \n  mutate(pct = round((n/sum(n))*100, 1)) %>% \n  select(-n) # remove n values (optional)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 20 × 4\n# Groups:   degree, young [10]\n   degree                   young racdif1   pct\n   <fct>                    <chr> <fct>   <dbl>\n 1 less than high school    no    yes      51.8\n 2 less than high school    no    no       48.2\n 3 less than high school    yes   yes      80  \n 4 less than high school    yes   no       20  \n 5 high school              no    yes      45  \n 6 high school              no    no       55  \n 7 high school              yes   yes      75.4\n 8 high school              yes   no       24.6\n 9 associate/junior college no    yes      50.9\n10 associate/junior college no    no       49.1\n11 associate/junior college yes   yes      81.8\n12 associate/junior college yes   no       18.2\n13 bachelor's               no    yes      62.5\n14 bachelor's               no    no       37.5\n15 bachelor's               yes   yes      77.4\n16 bachelor's               yes   no       22.6\n17 graduate                 no    yes      73.7\n18 graduate                 no    no       26.3\n19 graduate                 yes   yes      83.3\n20 graduate                 yes   no       16.7\n```\n:::\n\n```{.r .cell-code}\ndfc %>% \n  group_by(degree, young, racdif1) %>% \n  tally() %>% \n  mutate(pct = round((n/sum(n))*100, 1))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 20 × 5\n# Groups:   degree, young [10]\n   degree                   young racdif1     n   pct\n   <fct>                    <chr> <fct>   <int> <dbl>\n 1 less than high school    no    yes        58  51.8\n 2 less than high school    no    no         54  48.2\n 3 less than high school    yes   yes         8  80  \n 4 less than high school    yes   no          2  20  \n 5 high school              no    yes       395  45  \n 6 high school              no    no        483  55  \n 7 high school              yes   yes        52  75.4\n 8 high school              yes   no         17  24.6\n 9 associate/junior college no    yes       110  50.9\n10 associate/junior college no    no        106  49.1\n11 associate/junior college yes   yes         9  81.8\n12 associate/junior college yes   no          2  18.2\n13 bachelor's               no    yes       360  62.5\n14 bachelor's               no    no        216  37.5\n15 bachelor's               yes   yes        24  77.4\n16 bachelor's               yes   no          7  22.6\n17 graduate                 no    yes       344  73.7\n18 graduate                 no    no        123  26.3\n19 graduate                 yes   yes         5  83.3\n20 graduate                 yes   no          1  16.7\n```\n:::\n:::\n\n\n---\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# integrate survey weights\noptions(survey.lonely.psu = \"adjust\")\noptions(na.action=\"na.pass\")\n\ndfw <- df %>% #create new data frame called dfw for data frame with weights\n  as_survey_design(id = vpsu,\n                   weights = wtssps,\n                   nest = TRUE)\n```\n:::\n\n\n---\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# compare outputs for sample variable\n## Get the breakdown for every year\ndfw %>%\n  group_by(degree, young, racdif1) %>%\n  summarize(prop = survey_mean(na.rm = TRUE, vartype = \"ci\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 20 × 6\n# Groups:   degree, young [10]\n   degree                       young racdif1    prop prop_low prop_upp\n   <dbl+lbl>                    <chr> <dbl+lbl> <dbl>    <dbl>    <dbl>\n 1 0 [less than high school]    no    1 [yes]   0.497   0.391     0.602\n 2 0 [less than high school]    no    2 [no]    0.503   0.398     0.609\n 3 0 [less than high school]    yes   1 [yes]   0.854   0.637     1.07 \n 4 0 [less than high school]    yes   2 [no]    0.146  -0.0712    0.363\n 5 1 [high school]              no    1 [yes]   0.451   0.413     0.488\n 6 1 [high school]              no    2 [no]    0.549   0.512     0.587\n 7 1 [high school]              yes   1 [yes]   0.774   0.664     0.884\n 8 1 [high school]              yes   2 [no]    0.226   0.116     0.336\n 9 2 [associate/junior college] no    1 [yes]   0.505   0.431     0.579\n10 2 [associate/junior college] no    2 [no]    0.495   0.421     0.569\n11 2 [associate/junior college] yes   1 [yes]   0.755   0.452     1.06 \n12 2 [associate/junior college] yes   2 [no]    0.245  -0.0570    0.548\n13 3 [bachelor's]               no    1 [yes]   0.618   0.572     0.663\n14 3 [bachelor's]               no    2 [no]    0.382   0.337     0.428\n15 3 [bachelor's]               yes   1 [yes]   0.838   0.709     0.966\n16 3 [bachelor's]               yes   2 [no]    0.162   0.0336    0.291\n17 4 [graduate]                 no    1 [yes]   0.713   0.665     0.760\n18 4 [graduate]                 no    2 [no]    0.287   0.240     0.335\n19 4 [graduate]                 yes   1 [yes]   0.812   0.483     1.14 \n20 4 [graduate]                 yes   2 [no]    0.188  -0.141     0.517\n```\n:::\n:::\n\n\n---\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### MULTIPLE VARIABLE LINEAR REGRESSION MODEL (multiple independent variables)\n\n# develop the model\nmodel <- lm(racdif1 ~ age + educ + raceacs2, data = df, weight = wtssps)\nsummary(model)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = racdif1 ~ age + educ + raceacs2, data = df, weights = wtssps)\n\nWeighted Residuals:\n    Min      1Q  Median      3Q     Max \n-1.6475 -0.3684 -0.1789  0.4178  1.4224 \n\nCoefficients:\n              Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  1.6315044  0.0526608  30.981   <2e-16 ***\nage          0.0052317  0.0005457   9.588   <2e-16 ***\neduc        -0.0287252  0.0032477  -8.845   <2e-16 ***\nraceacs2    -0.3063518  0.0286256 -10.702   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.4694 on 2372 degrees of freedom\nMultiple R-squared:  0.1039,\tAdjusted R-squared:  0.1028 \nF-statistic:  91.7 on 3 and 2372 DF,  p-value: < 2.2e-16\n```\n:::\n\n```{.r .cell-code}\nsummary(model)$coefficient\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                Estimate   Std. Error    t value      Pr(>|t|)\n(Intercept)  1.631504374 0.0526607505  30.981411 2.921074e-177\nage          0.005231662 0.0005456652   9.587678  2.187549e-21\neduc        -0.028725167 0.0032477440  -8.844652  1.753938e-18\nraceacs2    -0.306351750 0.0286256248 -10.702011  3.892366e-26\n```\n:::\n\n```{.r .cell-code}\nconfint(model) # confidence interval for the model\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                   2.5 %       97.5 %\n(Intercept)  1.528238506  1.734770241\nage          0.004161632  0.006301692\neduc        -0.035093877 -0.022356456\nraceacs2    -0.362485587 -0.250217913\n```\n:::\n\n```{.r .cell-code}\n# residual standard errors\nsigma(model)/mean(df$racdif1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.3293089\n```\n:::\n\n```{.r .cell-code}\n# look at the anova output\nanova(model)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nAnalysis of Variance Table\n\nResponse: racdif1\n            Df Sum Sq Mean Sq F value    Pr(>F)    \nage          1  19.44 19.4429  88.230 < 2.2e-16 ***\neduc         1  15.94 15.9410  72.339 < 2.2e-16 ***\nraceacs2     1  25.24 25.2392 114.533 < 2.2e-16 ***\nResiduals 2372 522.71  0.2204                      \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n```\n:::\n:::\n\n\n\n---\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## MULTIVARIATE MULTIPLE REGRESSION (multiple dependent variables)\nmlm1 <- lm(cbind(racdif1, racdif2, racdif3, racdif4) ~ age + educ + raceacs2, data = df, weight = wtssps)\nsummary(mlm1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse racdif1 :\n\nCall:\nlm(formula = racdif1 ~ age + educ + raceacs2, data = df, weights = wtssps)\n\nWeighted Residuals:\n    Min      1Q  Median      3Q     Max \n-1.6475 -0.3684 -0.1789  0.4178  1.4224 \n\nCoefficients:\n              Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  1.6315044  0.0526608  30.981   <2e-16 ***\nage          0.0052317  0.0005457   9.588   <2e-16 ***\neduc        -0.0287252  0.0032477  -8.845   <2e-16 ***\nraceacs2    -0.3063518  0.0286256 -10.702   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.4694 on 2372 degrees of freedom\nMultiple R-squared:  0.1039,\tAdjusted R-squared:  0.1028 \nF-statistic:  91.7 on 3 and 2372 DF,  p-value: < 2.2e-16\n\n\nResponse racdif2 :\n\nCall:\nlm(formula = racdif2 ~ age + educ + raceacs2, data = df, weights = wtssps)\n\nWeighted Residuals:\n     Min       1Q   Median       3Q      Max \n-2.06147  0.01350  0.03584  0.06618  0.37353 \n\nCoefficients:\n              Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  1.8067434  0.0262084  68.937  < 2e-16 ***\nage          0.0007793  0.0002716   2.870  0.00414 ** \neduc         0.0076754  0.0016164   4.749 2.17e-06 ***\nraceacs2    -0.0890116  0.0142465  -6.248 4.91e-10 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.2336 on 2372 degrees of freedom\nMultiple R-squared:  0.03015,\tAdjusted R-squared:  0.02892 \nF-statistic: 24.58 on 3 and 2372 DF,  p-value: 1.171e-15\n\n\nResponse racdif3 :\n\nCall:\nlm(formula = racdif3 ~ age + educ + raceacs2, data = df, weights = wtssps)\n\nWeighted Residuals:\n    Min      1Q  Median      3Q     Max \n-1.6055 -0.3674 -0.2112  0.4540  1.3276 \n\nCoefficients:\n              Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  1.8038312  0.0539073  33.462  < 2e-16 ***\nage          0.0032584  0.0005586   5.833 6.18e-09 ***\neduc        -0.0357888  0.0033246 -10.765  < 2e-16 ***\nraceacs2    -0.1157096  0.0293033  -3.949 8.09e-05 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.4805 on 2372 degrees of freedom\nMultiple R-squared:  0.0626,\tAdjusted R-squared:  0.06141 \nF-statistic:  52.8 on 3 and 2372 DF,  p-value: < 2.2e-16\n\n\nResponse racdif4 :\n\nCall:\nlm(formula = racdif4 ~ age + educ + raceacs2, data = df, weights = wtssps)\n\nWeighted Residuals:\n    Min      1Q  Median      3Q     Max \n-1.6175 -0.4092  0.1532  0.2758  1.3339 \n\nCoefficients:\n              Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  1.3465037  0.0488972  27.537  < 2e-16 ***\nage         -0.0027009  0.0005067  -5.331 1.07e-07 ***\neduc         0.0346839  0.0030156  11.501  < 2e-16 ***\nraceacs2     0.0948325  0.0265798   3.568 0.000367 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.4359 on 2372 degrees of freedom\nMultiple R-squared:  0.06557,\tAdjusted R-squared:  0.06439 \nF-statistic: 55.48 on 3 and 2372 DF,  p-value: < 2.2e-16\n```\n:::\n\n```{.r .cell-code}\nmanova(mlm1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:\n   manova(mlm1)\n\nTerms:\n                     age     educ raceacs2 Residuals\nracdif1          19.4429  15.9410  25.2392  522.7079\nracdif2           0.5552   1.3384   2.1307  129.4694\nracdif3           6.8186  26.1593   3.6006  547.7481\nracdif4           4.5466  24.6595   2.4185  450.6644\nDeg. of Freedom        1        1        1      2372\n\nResidual standard errors: 0.4694314 0.2336287 0.4805439 0.4358824\nEstimated effects may be unbalanced\n```\n:::\n:::\n\n\n### Next up: Week 14\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}