<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Nathan Alexander, PhD">

<title>DATA 202: Statistically Measuring and Modeling Social Justice - DATA 202 - Week 11</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./hw/hw1.html" rel="next">
<link href="./week10.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta property="og:title" content="DATA 202: Statistically Measuring and Modeling Social Justice - DATA 202 - Week 11">
<meta property="og:description" content="Bivariate regression analysis">
<meta property="og:image" content="https://github.com/data-202/img/wk10-a-1.png">
<meta property="og:site-name" content="DATA 202: Statistically Measuring and Modeling Social Justice">
<meta property="og:image:height" content="1280">
<meta property="og:image:width" content="788">
<meta name="twitter:title" content="DATA 202: Statistically Measuring and Modeling Social Justice - DATA 202 - Week 11">
<meta name="twitter:description" content="Bivariate regression analysis">
<meta name="twitter:image" content="https://github.com/data-202/img/wk10-a-1.png">
<meta name="twitter:creator" content="@professornaite">
<meta name="twitter:image-height" content="1280">
<meta name="twitter:image-width" content="788">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./index.html">Course information</a></li><li class="breadcrumb-item"><a href="./index.html">Course landing page</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./img/dubois-loc.jpg" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://data-202.github.io/fa23" rel="" title="GitHub organization" class="quarto-navigation-tool px-1" aria-label="GitHub organization"><i class="bi bi-github"></i></a>
    <a href="https://canvas.howard.edu/courses/40683" rel="" title="Canvas site" class="quarto-navigation-tool px-1" aria-label="Canvas site"><i class="bi bi-code-square"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">Course information</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course landing page</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./course-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./assignments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignments</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./computing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Computing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Weekly materials</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 4</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 5</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 6</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 7</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 8</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 9</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 10</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week11.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Week 11</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Appendix</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Homeworks</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw/hw1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">HW 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw/hw2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">HW 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw/hw3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">HW 3</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Labs</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/lab1.qmd" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/lab2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./labs/lab3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 3</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
 <span class="menu-text">Papers</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./papers/annotated.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Paper 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./papers/paper2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Paper 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./papers/paper3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Paper 3</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./solutions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Solutions</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#part-i-context" id="toc-part-i-context" class="nav-link active" data-scroll-target="#part-i-context">Part I: Context</a>
  <ul class="collapse">
  <li><a href="#fatal-force" id="toc-fatal-force" class="nav-link" data-scroll-target="#fatal-force">Fatal force</a></li>
  <li><a href="#theory" id="toc-theory" class="nav-link" data-scroll-target="#theory">Theory</a></li>
  </ul></li>
  <li><a href="#part-ii-content" id="toc-part-ii-content" class="nav-link" data-scroll-target="#part-ii-content">Part II: Content</a></li>
  <li><a href="#part-iii-code" id="toc-part-iii-code" class="nav-link" data-scroll-target="#part-iii-code">Part III: Code</a>
  <ul class="collapse">
  <li><a href="#general-social-survey" id="toc-general-social-survey" class="nav-link" data-scroll-target="#general-social-survey">General Social Survey</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="week11-slides.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">DATA 202 - Week 11</h1>
<p class="subtitle lead">Bivariate regression analysis</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Nathan Alexander, PhD </p>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Center for Applied Data Science and Analytics
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  

</header>

<p>Over the next several weeks, our goals will relate to the various ways we can integrate social and theoretical concepts (the context) into decisions around measurement (the content) and analysis (the code).</p>
<p>Importantly, we will examine various historical examples to make sense of what has been done. Our next example will be based on the work of <a href="https://www.womenshistory.org/education-resources/biographies/ida-b-wells-barnett">Ida B. Wells-Barnett</a> (1862-1931), a late 19th century and early 20th century activist and research journalist.</p>
<hr>
<section id="part-i-context" class="level2">
<h2 class="anchored" data-anchor-id="part-i-context">Part I: Context</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/wk10-a-1.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">A Red Record. Tabulated Statistics and Alleged Causes of Lynchings in the US.</figcaption>
</figure>
</div>
<p>The below summary of <em>The Red Record</em> is from the <a href="https://www.nypl.org/events/exhibitions/galleries/beginnings/item/3548">New York Public Library</a>:</p>
<blockquote class="blockquote">
<p>The investigative journalist and activist Ida B. Wells, later Wells-Barnett, spearheaded the anti-lynching movement in the United States. Expanding on her groundbreaking exposé Southern Horrors: Lynch Law in All Its Phases (1892), A Red Record used mainstream white newspapers to document a resurgence of white mob violence, finding that more than 10,000 African Americans had been killed by lynching in the South between 1864 and 1894. Wells compiled statistics on alleged offenses and the geographic distribution and extent of lynching, and tied whites’ increased brutality and violence to their fear of African Americans’ increased political power. Her conclusion exhorts anti-lynching advocates to “[t]ell the world the facts,” for “When the Christian world knows the alarming growth and extent of outlawry in our land, some means will be found to stop it.”</p>
</blockquote>
<p>The <em>Red Record</em> is an important historical text worth reading. Further investigation of the data and content found in Wells-Barnett’s <em>The Red Record</em> will reveal a relationship be individual incidents of lynching and broader systemic issues of racism.</p>
<hr>
<p>To explore these connections between theory, method, and analysis, we will explore the use of a more recent data set at the individual level. The data we will use is the Fatal Force data set from the Washington Post.</p>
<p>Since 2015, the <em>Washington Post</em> has collected a <a href="https://www.washingtonpost.com/graphics/investigations/police-shootings-database/">record of every fatal encounter</a> with police in the United States.</p>
<p>This database is one resource that we’ll explore and connect to the <em>Red Record</em>.</p>
<p>What are some theoretical conceptions between Ida B. Wells-Barnett’s <em>Red Record</em> and the data collected by the <em>Washington Post</em>? How might these relationships inform our anlaysis? What is a theoretical construction that can be developed in relation to these connections?</p>
<hr>
<section id="fatal-force" class="level3">
<h3 class="anchored" data-anchor-id="fatal-force">Fatal force</h3>
<p>The <em>Washington Post</em> makes the <code>fatal force</code> data publicly accessible on their website and they provide a direct link to their GitHub repository (or repo). To access the data, we will pull it directly into R from Github.</p>
<section id="load-the-data" class="level4">
<h4 class="anchored" data-anchor-id="load-the-data">Load the data</h4>
<p>We will need to install packages and/or load libraries to import and explore the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>, <span class="at">repos =</span> <span class="st">"http://cran.us.r-project.org"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># load libraries</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># collection of essential packages for data science</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># the dplyr package makes data manipulation easier</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We then load the data directly into R from GitHub.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>fatal <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://raw.githubusercontent.com/washingtonpost/data-police-shootings/master/v2/fatal-police-shootings-data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="understand-the-data" class="level4">
<h4 class="anchored" data-anchor-id="understand-the-data">Understand the data</h4>
<p>We will first turn the file into a <code>tibble</code> using the <code>as_tibble</code> function.</p>
<p>From there, we will use the <code>glimpse()</code>, <code>names()</code>, and <code>str()</code> functions to understand the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examine fatal force data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>fatal <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(fatal) <span class="co"># turn data into a tibble</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us take note of the variables and variable types.</p>
<hr>
<p>Get a glimpse of the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examine fatal force data</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(fatal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 8,795
Columns: 19
$ id                         &lt;int&gt; 3, 4, 5, 8, 9, 11, 13, 15, 16, 17, 19, 21, …
$ date                       &lt;chr&gt; "2015-01-02", "2015-01-02", "2015-01-03", "…
$ threat_type                &lt;chr&gt; "point", "point", "move", "point", "point",…
$ flee_status                &lt;chr&gt; "not", "not", "not", "not", "not", "not", "…
$ armed_with                 &lt;chr&gt; "gun", "gun", "unarmed", "replica", "other"…
$ city                       &lt;chr&gt; "Shelton", "Aloha", "Wichita", "San Francis…
$ county                     &lt;chr&gt; "Mason", "Washington", "Sedgwick", "San Fra…
$ state                      &lt;chr&gt; "WA", "OR", "KS", "CA", "CO", "OK", "AZ", "…
$ latitude                   &lt;dbl&gt; 47.24683, 45.48742, 37.69477, 37.76291, 40.…
$ longitude                  &lt;dbl&gt; -123.12159, -122.89170, -97.28055, -122.422…
$ location_precision         &lt;chr&gt; "not_available", "not_available", "not_avai…
$ name                       &lt;chr&gt; "Tim Elliot", "Lewis Lee Lembke", "John Pau…
$ age                        &lt;int&gt; 53, 47, 23, 32, 39, 18, 22, 35, 34, 47, 25,…
$ gender                     &lt;chr&gt; "male", "male", "male", "male", "male", "ma…
$ race                       &lt;chr&gt; "A", "W", "H", "W", "H", "W", "H", "W", "W"…
$ race_source                &lt;chr&gt; "not_available", "not_available", "not_avai…
$ was_mental_illness_related &lt;chr&gt; "True", "False", "False", "True", "False", …
$ body_camera                &lt;chr&gt; "False", "False", "False", "False", "False"…
$ agency_ids                 &lt;chr&gt; "73", "70", "238", "196", "473", "101", "19…</code></pre>
</div>
</div>
<hr>
<p>View the variable names.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examine fatal force data</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(fatal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "id"                         "date"                      
 [3] "threat_type"                "flee_status"               
 [5] "armed_with"                 "city"                      
 [7] "county"                     "state"                     
 [9] "latitude"                   "longitude"                 
[11] "location_precision"         "name"                      
[13] "age"                        "gender"                    
[15] "race"                       "race_source"               
[17] "was_mental_illness_related" "body_camera"               
[19] "agency_ids"                </code></pre>
</div>
</div>
<hr>
<p>Understand the structure of the tibble.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examine fatal force data</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(fatal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [8,795 × 19] (S3: tbl_df/tbl/data.frame)
 $ id                        : int [1:8795] 3 4 5 8 9 11 13 15 16 17 ...
 $ date                      : chr [1:8795] "2015-01-02" "2015-01-02" "2015-01-03" "2015-01-04" ...
 $ threat_type               : chr [1:8795] "point" "point" "move" "point" ...
 $ flee_status               : chr [1:8795] "not" "not" "not" "not" ...
 $ armed_with                : chr [1:8795] "gun" "gun" "unarmed" "replica" ...
 $ city                      : chr [1:8795] "Shelton" "Aloha" "Wichita" "San Francisco" ...
 $ county                    : chr [1:8795] "Mason" "Washington" "Sedgwick" "San Francisco" ...
 $ state                     : chr [1:8795] "WA" "OR" "KS" "CA" ...
 $ latitude                  : num [1:8795] 47.2 45.5 37.7 37.8 40.4 ...
 $ longitude                 : num [1:8795] -123.1 -122.9 -97.3 -122.4 -104.7 ...
 $ location_precision        : chr [1:8795] "not_available" "not_available" "not_available" "not_available" ...
 $ name                      : chr [1:8795] "Tim Elliot" "Lewis Lee Lembke" "John Paul Quintero" "Matthew Hoffman" ...
 $ age                       : int [1:8795] 53 47 23 32 39 18 22 35 34 47 ...
 $ gender                    : chr [1:8795] "male" "male" "male" "male" ...
 $ race                      : chr [1:8795] "A" "W" "H" "W" ...
 $ race_source               : chr [1:8795] "not_available" "not_available" "not_available" "not_available" ...
 $ was_mental_illness_related: chr [1:8795] "True" "False" "False" "True" ...
 $ body_camera               : chr [1:8795] "False" "False" "False" "False" ...
 $ agency_ids                : chr [1:8795] "73" "70" "238" "196" ...</code></pre>
</div>
</div>
<hr>
<p>We should also view the <code>head()</code> and <code>tail()</code> of the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(fatal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 19
     id date      threat_type flee_status armed_with city  county state latitude
  &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;
1     3 2015-01-… point       not         gun        Shel… Mason  WA        47.2
2     4 2015-01-… point       not         gun        Aloha Washi… OR        45.5
3     5 2015-01-… move        not         unarmed    Wich… Sedgw… KS        37.7
4     8 2015-01-… point       not         replica    San … San F… CA        37.8
5     9 2015-01-… point       not         other      Evans Weld   CO        40.4
6    11 2015-01-… attack      not         gun        Guth… Logan  OK        35.9
# ℹ 10 more variables: longitude &lt;dbl&gt;, location_precision &lt;chr&gt;, name &lt;chr&gt;,
#   age &lt;int&gt;, gender &lt;chr&gt;, race &lt;chr&gt;, race_source &lt;chr&gt;,
#   was_mental_illness_related &lt;chr&gt;, body_camera &lt;chr&gt;, agency_ids &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(fatal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 19
     id date      threat_type flee_status armed_with city  county state latitude
  &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;
1  9541 2023-10-… threat      ""          knife      "Hom… Miami… FL        25.5
2  9542 2023-10-… shoot       ""          gun        "Vin… Gallia OH        NA  
3  9543 2023-10-… point       "not"       gun        "Aus… Travis TX        30.4
4  9547 2023-10-… shoot       ""          gun        "Ger… Washi… WI        43.2
5  9548 2023-10-… threat      "foot"      gun        "San… Bexar  TX        29.4
6  9549 2023-10-… threat      "car"       unknown    ""    Lanca… NE        NA  
# ℹ 10 more variables: longitude &lt;dbl&gt;, location_precision &lt;chr&gt;, name &lt;chr&gt;,
#   age &lt;int&gt;, gender &lt;chr&gt;, race &lt;chr&gt;, race_source &lt;chr&gt;,
#   was_mental_illness_related &lt;chr&gt;, body_camera &lt;chr&gt;, agency_ids &lt;chr&gt;</code></pre>
</div>
</div>
<p>What do you notice? What do you wonder?</p>
<hr>
<p>There are many ways to use R to understand and explore our data.</p>
<p>We will use a mixture of base <code>R</code> and <code>tidyverse</code> commands to clean up our data.</p>
<p>We will also use the <a href="https://r4ds.hadley.nz/"><em>R for Data Science, 2nd Edition</em></a> text as a guide.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/wk11-a-2.jpg" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption class="figure-caption">R for Data Science, 2nd Edition</figcaption>
</figure>
</div>
<hr>
</section>
<section id="codebook" class="level4">
<h4 class="anchored" data-anchor-id="codebook">Codebook</h4>
<p>Prior to beginning any cleaning and analysis, we need to know our data…</p>
<p>…before loading our data, we <em>should</em> have become more familiar with the codebook.</p>
<p>The code book will allow us to understand how data was collected and input into the data set. This often includes the levels of measurement for each variable and other related details.</p>
<p>The codebook for the <code>Fatal Force</code> data can be found online. We will need to navigate the GitHub site.</p>
<ul>
<li><p>Main landing page: <a href="https://github.com/washingtonpost/data-police-shootings" class="uri">https://github.com/washingtonpost/data-police-shootings</a></p></li>
<li><p>Fatal Force Database (version 2): <a href="https://github.com/washingtonpost/data-police-shootings/tree/master/v2" class="uri">https://github.com/washingtonpost/data-police-shootings/tree/master/v2</a></p></li>
</ul>
<p>A codebook for the data we have uploaded can be found at the bottom of the database page.</p>
<hr>
<p>Let’s first remind ourselves of the variables and variable types.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(fatal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [8,795 × 19] (S3: tbl_df/tbl/data.frame)
 $ id                        : int [1:8795] 3 4 5 8 9 11 13 15 16 17 ...
 $ date                      : chr [1:8795] "2015-01-02" "2015-01-02" "2015-01-03" "2015-01-04" ...
 $ threat_type               : chr [1:8795] "point" "point" "move" "point" ...
 $ flee_status               : chr [1:8795] "not" "not" "not" "not" ...
 $ armed_with                : chr [1:8795] "gun" "gun" "unarmed" "replica" ...
 $ city                      : chr [1:8795] "Shelton" "Aloha" "Wichita" "San Francisco" ...
 $ county                    : chr [1:8795] "Mason" "Washington" "Sedgwick" "San Francisco" ...
 $ state                     : chr [1:8795] "WA" "OR" "KS" "CA" ...
 $ latitude                  : num [1:8795] 47.2 45.5 37.7 37.8 40.4 ...
 $ longitude                 : num [1:8795] -123.1 -122.9 -97.3 -122.4 -104.7 ...
 $ location_precision        : chr [1:8795] "not_available" "not_available" "not_available" "not_available" ...
 $ name                      : chr [1:8795] "Tim Elliot" "Lewis Lee Lembke" "John Paul Quintero" "Matthew Hoffman" ...
 $ age                       : int [1:8795] 53 47 23 32 39 18 22 35 34 47 ...
 $ gender                    : chr [1:8795] "male" "male" "male" "male" ...
 $ race                      : chr [1:8795] "A" "W" "H" "W" ...
 $ race_source               : chr [1:8795] "not_available" "not_available" "not_available" "not_available" ...
 $ was_mental_illness_related: chr [1:8795] "True" "False" "False" "True" ...
 $ body_camera               : chr [1:8795] "False" "False" "False" "False" ...
 $ agency_ids                : chr [1:8795] "73" "70" "238" "196" ...</code></pre>
</div>
</div>
<p>What do you notice? What do you wonder?</p>
<p>The use of <code>#</code> in line with your code is one valuable way to leave notes for yourself and any readers of your code. This also helps to support if others would like to reproduce your analysis.</p>
<p>Here, you may want to take note of some of the issues you see that could cause potential issues later as you begin your analysis. For example, a few things noteworthy observations will inform some initial changes.</p>
<hr>
</section>
<section id="clean-up-the-data" class="level4">
<h4 class="anchored" data-anchor-id="clean-up-the-data">Clean up the data</h4>
<p>Let’s fix a few variables based on our previous observations and the codebook.</p>
<ul>
<li><p>The <code>date</code> variable is listed as a character variable, however, we want to transform this into a more appropriate variable for the variable type. We can use the command <code>as.date()</code> to do so.</p></li>
<li><p>The <code>age</code> variable is listed as an integer, which is correct. However, we but want to change the variable type to numeric to conduct some specific analyses in the <code>tidyverse</code>.</p></li>
<li><p>The <code>latitude</code> and <code>longitude</code> variables are listed as numeric variables. However, they contain some different information where values such as the <code>mean</code> or other measures of center do not make sense.</p></li>
<li><p>The <code>was_mental_illness_related</code> variable is also listed as a character variable when, in fact, it should be a logical variable based on both the codebook and contents of the cells.</p></li>
<li><p>The <code>body_camera</code> variable is also listed as a character variable when it should be a logical variable given the contents of the cells.</p></li>
</ul>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fix vars</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># change vars to appropriate formats</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  fatal<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(fatal<span class="sc">$</span>date) <span class="co"># check/change to date format</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  fatal<span class="sc">$</span>age <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(fatal<span class="sc">$</span>age)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  fatal<span class="sc">$</span>was_mental_illness_related <span class="ot">&lt;-</span> <span class="fu">as.logical</span>(fatal<span class="sc">$</span>was_mental_illness_related)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  fatal<span class="sc">$</span>body_camera <span class="ot">&lt;-</span> <span class="fu">as.logical</span>(fatal<span class="sc">$</span>body_camera)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># format to 20YY</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  fatal.year <span class="ot">&lt;-</span> <span class="fu">format</span>(fatal<span class="sc">$</span>date, <span class="at">format=</span><span class="st">"20%y"</span>) </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  fatal<span class="sc">$</span>year <span class="ot">&lt;-</span> fatal.year <span class="co"># add a year column to the df</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  fatal <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(state, year) <span class="ot">-&gt;</span> fatal</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  fatal</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8,795 × 20
   state year     id date       threat_type flee_status armed_with city   county
   &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;date&gt;     &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt; 
 1 WA    2015      3 2015-01-02 point       not         gun        Shelt… Mason 
 2 OR    2015      4 2015-01-02 point       not         gun        Aloha  Washi…
 3 KS    2015      5 2015-01-03 move        not         unarmed    Wichi… Sedgw…
 4 CA    2015      8 2015-01-04 point       not         replica    San F… San F…
 5 CO    2015      9 2015-01-04 point       not         other      Evans  Weld  
 6 OK    2015     11 2015-01-04 attack      not         gun        Guthr… Logan 
 7 AZ    2015     13 2015-01-05 shoot       car         gun        Chand… Maric…
 8 KS    2015     15 2015-01-06 point       not         gun        Assar… Saline
 9 IA    2015     16 2015-01-06 accident    not         unarmed    Burli… Des M…
10 PA    2015     17 2015-01-06 point       not         replica    Knoxv… Alleg…
# ℹ 8,785 more rows
# ℹ 11 more variables: latitude &lt;dbl&gt;, longitude &lt;dbl&gt;,
#   location_precision &lt;chr&gt;, name &lt;chr&gt;, age &lt;dbl&gt;, gender &lt;chr&gt;, race &lt;chr&gt;,
#   race_source &lt;chr&gt;, was_mental_illness_related &lt;lgl&gt;, body_camera &lt;lgl&gt;,
#   agency_ids &lt;chr&gt;</code></pre>
</div>
</div>
<hr>
<section id="ancillary-explorations" class="level5">
<h5 class="anchored" data-anchor-id="ancillary-explorations">Ancillary explorations</h5>
<p>Sometimes when analyzing data, you may want to gather quick information.</p>
<p>For example, let’s say I also want to get a count of fatal shootings by year.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get counts by year</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>fatal <span class="sc">%&gt;%</span> <span class="fu">count</span>(year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 2
  year      n
  &lt;chr&gt; &lt;int&gt;
1 2015    995
2 2016    958
3 2017    983
4 2018    992
5 2019    997
6 2020   1019
7 2021   1048
8 2022   1096
9 2023    707</code></pre>
</div>
</div>
<p>I was able to do this when I added the <code>year</code> variable to the dataframe.</p>
<p>What do you notice? What do you wonder?</p>
<hr>
</section>
</section>
<section id="transform-the-data" class="level4">
<h4 class="anchored" data-anchor-id="transform-the-data">Transform the data</h4>
<p>We should check the structure of our data again.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(fatal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [8,795 × 20] (S3: tbl_df/tbl/data.frame)
 $ state                     : chr [1:8795] "WA" "OR" "KS" "CA" ...
 $ year                      : chr [1:8795] "2015" "2015" "2015" "2015" ...
 $ id                        : int [1:8795] 3 4 5 8 9 11 13 15 16 17 ...
 $ date                      : Date[1:8795], format: "2015-01-02" "2015-01-02" ...
 $ threat_type               : chr [1:8795] "point" "point" "move" "point" ...
 $ flee_status               : chr [1:8795] "not" "not" "not" "not" ...
 $ armed_with                : chr [1:8795] "gun" "gun" "unarmed" "replica" ...
 $ city                      : chr [1:8795] "Shelton" "Aloha" "Wichita" "San Francisco" ...
 $ county                    : chr [1:8795] "Mason" "Washington" "Sedgwick" "San Francisco" ...
 $ latitude                  : num [1:8795] 47.2 45.5 37.7 37.8 40.4 ...
 $ longitude                 : num [1:8795] -123.1 -122.9 -97.3 -122.4 -104.7 ...
 $ location_precision        : chr [1:8795] "not_available" "not_available" "not_available" "not_available" ...
 $ name                      : chr [1:8795] "Tim Elliot" "Lewis Lee Lembke" "John Paul Quintero" "Matthew Hoffman" ...
 $ age                       : num [1:8795] 53 47 23 32 39 18 22 35 34 47 ...
 $ gender                    : chr [1:8795] "male" "male" "male" "male" ...
 $ race                      : chr [1:8795] "A" "W" "H" "W" ...
 $ race_source               : chr [1:8795] "not_available" "not_available" "not_available" "not_available" ...
 $ was_mental_illness_related: logi [1:8795] TRUE FALSE FALSE TRUE FALSE FALSE ...
 $ body_camera               : logi [1:8795] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ agency_ids                : chr [1:8795] "73" "70" "238" "196" ...</code></pre>
</div>
</div>
<p>While our initial changes are noted, observe the <code>chr</code> (character) variable type.</p>
<hr>
<p>We may want to change these into <code>fct</code> (factor) variables types.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>fatal_factor <span class="ot">&lt;-</span> fatal <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_if</span>(is.character, as.factor)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(fatal_factor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [8,795 × 20] (S3: tbl_df/tbl/data.frame)
 $ state                     : Factor w/ 51 levels "AK","AL","AR",..: 48 38 17 5 6 37 4 17 13 39 ...
 $ year                      : Factor w/ 9 levels "2015","2016",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ id                        : int [1:8795] 3 4 5 8 9 11 13 15 16 17 ...
 $ date                      : Date[1:8795], format: "2015-01-02" "2015-01-02" ...
 $ threat_type               : Factor w/ 9 levels "","accident",..: 6 6 5 6 6 3 7 6 2 6 ...
 $ flee_status               : Factor w/ 5 levels "","car","foot",..: 4 4 4 4 4 4 2 4 4 4 ...
 $ armed_with                : Factor w/ 22 levels "","blunt_object",..: 5 5 17 14 11 5 5 5 17 14 ...
 $ city                      : Factor w/ 3379 levels "","Abbeville",..: 2776 48 3297 2680 957 1233 507 125 393 1550 ...
 $ county                    : Factor w/ 845 levels "","Acadia","Ada",..: 472 806 693 673 814 444 466 668 210 16 ...
 $ latitude                  : num [1:8795] 47.2 45.5 37.7 37.8 40.4 ...
 $ longitude                 : num [1:8795] -123.1 -122.9 -97.3 -122.4 -104.7 ...
 $ location_precision        : Factor w/ 8 levels "","address","block",..: 5 5 5 5 5 5 5 5 5 5 ...
 $ name                      : Factor w/ 8242 levels "","A.B. Carr",..: 7649 5096 4056 5512 5798 4749 4727 946 632 5084 ...
 $ age                       : num [1:8795] 53 47 23 32 39 18 22 35 34 47 ...
 $ gender                    : Factor w/ 4 levels "","female","male",..: 3 3 3 3 3 3 3 3 2 3 ...
 $ race                      : Factor w/ 8 levels "","A","B","B;H",..: 2 8 5 8 5 8 5 8 8 3 ...
 $ race_source               : Factor w/ 7 levels "","clip","not_available",..: 3 3 3 3 3 3 3 3 3 3 ...
 $ was_mental_illness_related: logi [1:8795] TRUE FALSE FALSE TRUE FALSE FALSE ...
 $ body_camera               : logi [1:8795] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ agency_ids                : Factor w/ 3425 levels "1","100","100;3031",..: 3162 3130 1529 1053 2880 15 1044 2903 2064 1795 ...</code></pre>
</div>
</div>
<p>Take note of the changes. It seems that this method was not the best solution.</p>
<p>Which variables should be changed or reverted?</p>
<p>The answers can be found in the Fatal Force <a href="https://github.com/washingtonpost/data-police-shootings/tree/master/v2">codebook</a>.</p>
<hr>
<section id="drop-missing-values" class="level5">
<h5 class="anchored" data-anchor-id="drop-missing-values">Drop missing values</h5>
<p>For efficiency, we will make changes to variables of interest and drop all missing values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>fatal <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">c</span>(<span class="st">'threat_type'</span>, <span class="st">'flee_status'</span>, <span class="st">'armed_with'</span>, <span class="st">'city'</span>, <span class="st">'county'</span>, <span class="st">'gender'</span>, <span class="st">'race'</span>), as.factor) <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="ot">-&gt;</span> fatal_clean <span class="co"># generate a new `clean` dataframe</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(fatal_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [7,345 × 20] (S3: tbl_df/tbl/data.frame)
 $ state                     : chr [1:7345] "WA" "OR" "KS" "CA" ...
 $ year                      : chr [1:7345] "2015" "2015" "2015" "2015" ...
 $ id                        : int [1:7345] 3 4 5 8 9 11 13 15 16 17 ...
 $ date                      : Date[1:7345], format: "2015-01-02" "2015-01-02" ...
 $ threat_type               : Factor w/ 9 levels "","accident",..: 6 6 5 6 6 3 7 6 2 6 ...
 $ flee_status               : Factor w/ 5 levels "","car","foot",..: 4 4 4 4 4 4 2 4 4 4 ...
 $ armed_with                : Factor w/ 22 levels "","blunt_object",..: 5 5 17 14 11 5 5 5 17 14 ...
 $ city                      : Factor w/ 3379 levels "","Abbeville",..: 2776 48 3297 2680 957 1233 507 125 393 1550 ...
 $ county                    : Factor w/ 845 levels "","Acadia","Ada",..: 472 806 693 673 814 444 466 668 210 16 ...
 $ latitude                  : num [1:7345] 47.2 45.5 37.7 37.8 40.4 ...
 $ longitude                 : num [1:7345] -123.1 -122.9 -97.3 -122.4 -104.7 ...
 $ location_precision        : chr [1:7345] "not_available" "not_available" "not_available" "not_available" ...
 $ name                      : chr [1:7345] "Tim Elliot" "Lewis Lee Lembke" "John Paul Quintero" "Matthew Hoffman" ...
 $ age                       : num [1:7345] 53 47 23 32 39 18 22 35 34 47 ...
 $ gender                    : Factor w/ 4 levels "","female","male",..: 3 3 3 3 3 3 3 3 2 3 ...
 $ race                      : Factor w/ 8 levels "","A","B","B;H",..: 2 8 5 8 5 8 5 8 8 3 ...
 $ race_source               : chr [1:7345] "not_available" "not_available" "not_available" "not_available" ...
 $ was_mental_illness_related: logi [1:7345] TRUE FALSE FALSE TRUE FALSE FALSE ...
 $ body_camera               : logi [1:7345] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ agency_ids                : chr [1:7345] "73" "70" "238" "196" ...</code></pre>
</div>
</div>
<p>However, with more time, we should inspect the data further and change all variables.</p>
<hr>
</section>
</section>
<section id="check-the-data" class="level4">
<h4 class="anchored" data-anchor-id="check-the-data">Check the data</h4>
<p>One more check to make sure that we have dropped any missing observations.</p>
<p>I will use the <code>sapply()</code> function from <code>Lab 1</code> to check for missing values.</p>
<p>First, we’ll check our original data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(fatal, <span class="cf">function</span>(x) <span class="fu">sum</span>(<span class="fu">is.na</span>(x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     state                       year 
                         0                          0 
                        id                       date 
                         0                          0 
               threat_type                flee_status 
                         0                          0 
                armed_with                       city 
                         0                          0 
                    county                   latitude 
                         0                        997 
                 longitude         location_precision 
                       997                          0 
                      name                        age 
                         0                        563 
                    gender                       race 
                         0                          0 
               race_source was_mental_illness_related 
                         0                          0 
               body_camera                 agency_ids 
                         0                          0 </code></pre>
</div>
</div>
<hr>
<p>Then we’ll examine our cleaned data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(fatal_clean, <span class="cf">function</span>(x) <span class="fu">sum</span>(<span class="fu">is.na</span>(x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     state                       year 
                         0                          0 
                        id                       date 
                         0                          0 
               threat_type                flee_status 
                         0                          0 
                armed_with                       city 
                         0                          0 
                    county                   latitude 
                         0                          0 
                 longitude         location_precision 
                         0                          0 
                      name                        age 
                         0                          0 
                    gender                       race 
                         0                          0 
               race_source was_mental_illness_related 
                         0                          0 
               body_camera                 agency_ids 
                         0                          0 </code></pre>
</div>
</div>
<hr>
</section>
<section id="explore-the-data" class="level4">
<h4 class="anchored" data-anchor-id="explore-the-data">Explore the data</h4>
<p>We will begin to explore with a summary of our cleaned data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fatal_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    state               year                 id            date           
 Length:7345        Length:7345        Min.   :   3   Min.   :2015-01-02  
 Class :character   Class :character   1st Qu.:2122   1st Qu.:2016-12-04  
 Mode  :character   Mode  :character   Median :4351   Median :2019-01-01  
                                       Mean   :4471   Mean   :2019-01-31  
                                       3rd Qu.:6610   3rd Qu.:2021-02-04  
                                       Max.   :9548   Max.   :2023-10-23  
                                                                          
       threat_type   flee_status         armed_with            city     
 shoot       :2033        : 865   gun         :4277   Los Angeles: 112  
 threat      :1995   car  :1143   knife       :1250   Phoenix    :  95  
 point       :1433   foot : 961   unarmed     : 461   Houston    :  79  
 attack      :1093   not  :4110   replica     : 260   Las Vegas  :  65  
 move        : 361   other: 266   undetermined: 234   San Antonio:  64  
 undetermined: 219                vehicle     : 229   Chicago    :  48  
 (Other)     : 211                (Other)     : 634   (Other)    :6882  
         county        latitude       longitude          location_precision
            :3694   Min.   :19.50   Min.   :-9.007e+15   Length:7345       
 Los Angeles: 152   1st Qu.:33.49   1st Qu.:-1.120e+02   Class :character  
 Maricopa   : 102   Median :36.15   Median :-9.400e+01   Mode  :character  
 Washington :  52   Mean   :36.71   Mean   :-1.226e+12                     
 Orange     :  51   3rd Qu.:40.05   3rd Qu.:-8.300e+01                     
 Jefferson  :  50   Max.   :71.30   Max.   :-6.800e+01                     
 (Other)    :3244                                                          
     name                age               gender          race     
 Length:7345        Min.   : 2.00             :   9   W      :3349  
 Class :character   1st Qu.:27.00   female    : 334   B      :1775  
 Mode  :character   Median :35.00   male      :7001   H      :1187  
                    Mean   :37.27   non-binary:   1          : 786  
                    3rd Qu.:45.00                     A      : 128  
                    Max.   :91.00                     N      :  98  
                                                      (Other):  22  
 race_source        was_mental_illness_related body_camera    
 Length:7345        Mode :logical              Mode :logical  
 Class :character   FALSE:5765                 FALSE:6187     
 Mode  :character   TRUE :1580                 TRUE :1158     
                                                              
                                                              
                                                              
                                                              
  agency_ids       
 Length:7345       
 Class :character  
 Mode  :character  
                   
                   
                   
                   </code></pre>
</div>
</div>
<hr>
<section id="ancillary-explorations." class="level5">
<h5 class="anchored" data-anchor-id="ancillary-explorations.">Ancillary explorations.</h5>
<p>With the clean data, I may be interested in getting counts by <code>state</code> and then <code>year</code> as we explore.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get counts by state then year</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>fatal_clean <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(state, year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 446 × 3
   state year      n
   &lt;chr&gt; &lt;chr&gt; &lt;int&gt;
 1 AK    2015      4
 2 AK    2016      7
 3 AK    2017      6
 4 AK    2018      5
 5 AK    2019      6
 6 AK    2020      6
 7 AK    2021      4
 8 AK    2022      5
 9 AL    2015     17
10 AL    2016     21
# ℹ 436 more rows</code></pre>
</div>
</div>
<p>What might this output provide for us?</p>
<p>What code chunk should we add in order to see the additional rows?</p>
<hr>
</section>
</section>
</section>
<section id="theory" class="level3">
<h3 class="anchored" data-anchor-id="theory">Theory</h3>
<p>Based on our explorations up to this point, what relationship might you examine?</p>
<div class="cell">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">graph LR
  A[X] --&gt; B[Y]
</pre>
</div>
</div>
</div>
</div>
<section id="research-questions" class="level4">
<h4 class="anchored" data-anchor-id="research-questions">Research questions</h4>
<p>With our conceptual framing and backing theoretical work, we can proceed to examine exploratory analyses on the data. During the exploratory phase of analysis, a nice opportunity is presented that will allow you to examine the data is to generate a series of discrete research questions that help you make associations between various components of your data.</p>
<hr>
</section>
</section>
</section>
<section id="part-ii-content" class="level2">
<h2 class="anchored" data-anchor-id="part-ii-content">Part II: Content</h2>
<p>Regression analysis is a standard analysis in many statistical studies.</p>
<p>There are many different types of regression. We’ll continue with our exploration of bivariate regression analysis and focus on some of the base assumptions as it relates to study development.</p>
<p>We will begin by looking at the underlying assumptions of regression analysis. These assumptions are the technical (or structural) components of our analyses, and should be checked at the initiation of a research study, starting with data collection or understanding how data was collected if it is a secondary analysis.</p>
<hr>
<section id="bivariate-regression-analysis" class="level4">
<h4 class="anchored" data-anchor-id="bivariate-regression-analysis">Bivariate regression analysis</h4>
<p>Let us take two variables, <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> and assume there is an association.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit simple linear regression model</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine regression outputs</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = y ~ x)

Residuals:
    Min      1Q  Median      3Q     Max 
-1.9073 -0.6835 -0.0875  0.5806  3.2904 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  1.89720    0.09755   19.45   &lt;2e-16 ***
x            2.94753    0.10688   27.58   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.9707 on 98 degrees of freedom
Multiple R-squared:  0.8859,    Adjusted R-squared:  0.8847 
F-statistic: 760.6 on 1 and 98 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check regression coefficients</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>coeff <span class="ot">&lt;-</span> <span class="fu">coef</span>(model)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>coeff</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept)           x 
   1.897197    2.947528 </code></pre>
</div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check R-squared value</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>rsq <span class="ot">&lt;-</span> <span class="fu">summary</span>(model)<span class="sc">$</span>r.squared</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>rsq</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8858556</code></pre>
</div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate predictions</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(model) <span class="co"># call this object to show the predicted values of the model</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the regression line</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x, y)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(model, <span class="at">col=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="week11_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check residuals</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>resids <span class="ot">&lt;-</span> <span class="fu">residuals</span>(model)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x, resids)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="week11_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Diagnostic plots</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="week11_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check significance of predictor</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: y
          Df Sum Sq Mean Sq F value    Pr(&gt;F)    
x          1 716.67  716.67  760.56 &lt; 2.2e-16 ***
Residuals 98  92.34    0.94                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="part-iii-code" class="level2">
<h2 class="anchored" data-anchor-id="part-iii-code">Part III: Code</h2>
<p>This is a reminder to deepen your understanding of the General Social Survey (GSS) using the notes provided below from <a href="./week9.html">week 9</a>.</p>
<section id="general-social-survey" class="level3">
<h3 class="anchored" data-anchor-id="general-social-survey">General Social Survey</h3>
<p>This week we’ll return to our examination of the General Social Survey (GSS) data.</p>
<p>As a first task, please identify up to two or three variables that you can utilize to follow along with your analysis.</p>
<hr>
<section id="load-the-data-1" class="level4">
<h4 class="anchored" data-anchor-id="load-the-data-1">Load the data</h4>
<p>We will begin by loading a host of libraries so that we can perform more complex analyses.</p>
<p>There will also be a need to install some additional packages that we have not used before.</p>
<p>We will begin by installing a few new packages.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="do">## install new packages</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"srvyr"</span>, <span class="at">repos =</span> <span class="st">"http://cran.us.r-project.org"</span>)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"statsr"</span>, <span class="at">repos =</span> <span class="st">"http://cran.us.r-project.org"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Then we will load the libraries.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="do">## load libraries</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Hmisc)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(descr)</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(foreign)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survey)</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(srvyr)</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(statsr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>To access the GSS data, we will need to use a remote install command.</p>
<p>The data come from the <code>GSSR</code> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install GSSR data</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"kjhealy/gssr"</span>)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gssr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>We will now load the GSS documentation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(gss_doc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>View the GSS documentation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(gss_doc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="next-up-week-12" class="level4">
<h4 class="anchored" data-anchor-id="next-up-week-12">Next up: Week 12</h4>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./week10.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Week 10</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./hw/hw1.html" class="pagination-link">
        <span class="nav-page-text">HW 1</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">© Copyright 2023, Nathan Alexander</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">This page was built by Nathan Alexander, PhD in <a href="https://quarto.org/">Quarto</a></div>
  </div>
</footer>



</body></html>